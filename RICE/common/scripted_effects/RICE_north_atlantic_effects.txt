

RICE_setup_north_atlantic_flavor_pack_effect = {

	#########################################################################
	#
	# CULTURE AND RELIGION STUFF
	#
	#########################################################################

	culture:khanty = { save_scope_as = khanty }
	culture:norwegian = { save_scope_as = norwegian }

	culture:basque = {
		add_culture_tradition = tradition_RICE_master_whalers
		remove_variable = tradition_cooldown
	}	

	culture:norwegian = {
		add_culture_tradition = tradition_RICE_whalers
		remove_variable = tradition_cooldown
	}	

	culture:icelandic = {
		get_all_innovations_from = scope:norwegian
		add_culture_tradition = tradition_RICE_whalers
		remove_variable = tradition_cooldown
	}

	culture:greenlandic = {
		get_all_innovations_from = scope:norwegian
		add_culture_tradition = tradition_RICE_whalers
		remove_variable = tradition_cooldown
	}		

	# culture:vinlandic = {
	# 	get_all_innovations_from = scope:norwegian
	# 	add_culture_tradition = tradition_RICE_whalers
	# 	remove_variable = tradition_cooldown
	# }
	
	culture:breton = {
		add_culture_tradition = tradition_RICE_whalers
		remove_variable = tradition_cooldown
	}	
	
	culture:sami = {
		add_culture_tradition = tradition_RICE_whalers
		remove_variable = tradition_cooldown
	}	
	
	culture:samoyed = {
		add_culture_tradition = tradition_RICE_whalers
		remove_variable = tradition_cooldown
	}	

	culture:inuit = {
		get_all_innovations_from = scope:khanty
		add_culture_tradition = tradition_RICE_arctic_adaptations
		add_culture_tradition = tradition_RICE_whalers
		remove_variable = tradition_cooldown
		add_innovation = innovation_RICE_dog_sleds
		add_innovation = innovation_RICE_arctic_boats
		add_innovation = innovation_RICE_toggling_harpoons
	}	

	culture:dorset = {
		get_all_innovations_from = scope:khanty
	}	

	culture:innu = {
		get_all_innovations_from = scope:khanty
		add_culture_tradition = tradition_RICE_seasonal_migrators
		remove_variable = tradition_cooldown
	}	

	culture:east_cree = {
		get_all_innovations_from = scope:khanty
		add_culture_tradition = tradition_RICE_seasonal_migrators
		remove_variable = tradition_cooldown
	}	

	culture:mikmaq = {
		get_all_innovations_from = scope:khanty
		add_culture_tradition = tradition_RICE_seasonal_migrators
		remove_variable = tradition_cooldown
	}	

	culture:maliseet = {
		get_all_innovations_from = scope:khanty
		add_culture_tradition = tradition_RICE_seasonal_migrators
		remove_variable = tradition_cooldown
	}	

	culture:abenaki = {
		get_all_innovations_from = scope:khanty
		add_culture_tradition = tradition_RICE_seasonal_migrators
		remove_variable = tradition_cooldown
	}	

	culture:penobscot = {
		get_all_innovations_from = scope:khanty
		add_culture_tradition = tradition_RICE_seasonal_migrators
		remove_variable = tradition_cooldown
	}	

	culture:passamaquoddy = {
		get_all_innovations_from = scope:khanty
		add_culture_tradition = tradition_RICE_seasonal_migrators
		remove_variable = tradition_cooldown
	}	
	
	culture:beothuk = {
		get_all_innovations_from = scope:khanty
		add_culture_tradition = tradition_RICE_red_ochre
		add_culture_tradition = tradition_RICE_seasonal_migrators
		remove_variable = tradition_cooldown
	}		

	culture:laurentian = {
		get_all_innovations_from = scope:khanty
	}		

	culture:yakut = {
		add_innovation = innovation_RICE_dog_sleds
	}		

	culture:yeniseian = {
		add_innovation = innovation_RICE_dog_sleds
	}		

	culture:evenk = {
		add_innovation = innovation_RICE_dog_sleds
	}		

	culture:nivkh = {
		add_innovation = innovation_RICE_dog_sleds
	}		

	culture:yukaghir = {
		add_innovation = innovation_RICE_dog_sleds
	}		

	culture:samoyed = {
		add_innovation = innovation_RICE_dog_sleds
	}

	culture:khanty = {
		add_innovation = innovation_RICE_dog_sleds
	}		

	if = {
		limit = {
			current_date >= 930.1.1			
		}
		# Set Icelandic culture
		RICE_create_icelandic_effect = yes
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:RICE_north_atlantic_iceland_formed_flag
		}
	}


	#########################################################################
	#
	# SET UP HISTORY FOR 867
	# Icelandic Chieftains, Papar, etc.
	#
	#########################################################################

	if = {
		limit = {
			game_start_date = 867.1.1
		}
		# Give Austisland to Uni 'the Dane' Garðarsson (Garðar Svavarsson's son)
		character:180258 = {
			get_title = title:c_austisland
			RICE_setup_new_granted_ruler_bonuses_effect = yes
			add_courtier = character:180258
		}
		# Give Sudurland to Ingólfr Arnarson
		character:186504 = {
			get_title = title:c_sudurland
			#RICE_setup_new_granted_ruler_bonuses_effect = yes
		}
		# Give Nordrland to Helgi Eyvindarson
		character:166331 = {
			get_title = title:c_nordrland
			RICE_setup_new_granted_ruler_bonuses_effect = yes
		}
		# Give Faroe Islands to Grímr Kamban
		character:RICE_north_atlantic_003 = {
			get_title = title:c_faereyar
			RICE_setup_new_granted_ruler_bonuses_effect = yes
		}
		character:180258 = {
			add_courtier = character:180258
		}
		character:168609 = {
			add_courtier = character:166330
		}
		character:166331 = {
			add_courtier = character:166035
			add_courtier = character:166040
			add_courtier = character:166041
			add_courtier = character:166030
			add_courtier = character:166042
			add_courtier = character:166032	
		}
		title:c_austisland = {
			add_county_modifier = {
				modifier = RICE_north_atlantic_papar_remnants
				years = 50
			}
		}
		title:c_sudurland = {
			add_county_modifier = {
				modifier = RICE_north_atlantic_papar_remnants
				years = 50
			}
		}
		title:c_nordrland = {
			add_county_modifier = {
				modifier = RICE_north_atlantic_papar_remnants
				years = 50
			}
		}
		title:c_vestisland = {
			add_county_modifier = {
				modifier = RICE_north_atlantic_papar_remnants
				years = 50
			}
		}
		title:c_faereyar = {
			add_county_modifier = {
				modifier = RICE_north_atlantic_papar_remnants
				years = 50
			}
		}
		title:c_orkney = {
			add_county_modifier = {
				modifier = RICE_north_atlantic_papar_remnants
				years = 50
			}
		}
		title:c_shetland = {
			add_county_modifier = {
				modifier = RICE_north_atlantic_papar_remnants
				years = 50
			}
		}
		title:c_argyll = {
			add_county_modifier = {
				modifier = RICE_north_atlantic_papar_remnants
				years = 50
			}
		}
		title:c_outer_hebrides = {
			add_county_modifier = {
				modifier = RICE_north_atlantic_papar_remnants
				years = 50
			}
		}
		title:c_inner_hebrides = {
			add_county_modifier = {
				modifier = RICE_north_atlantic_papar_remnants
				years = 50
			}
		}
		title:c_caithness = {
			add_county_modifier = {
				modifier = RICE_north_atlantic_papar_remnants
				years = 50
			}
		}
		title:c_sutherland = {
			add_county_modifier = {
				modifier = RICE_north_atlantic_papar_remnants
				years = 50
			}
		}
	}

	#########################################################################
	#
	# MISC STUFF
	#
	#########################################################################

	set_global_variable = {
		name = RICE_greenland_resilience
		value = 100
	}

	set_global_variable = {
		name = RICE_greenland_networks
		value = 100
	}

	# Starts off at 0
	set_global_variable = {
		name = RICE_greenland_vinland_viability
		value = 10
	}

	set_global_variable = {
		name = RICE_greenland_vinland_viability_chances
		value = RICE_north_atlantic_vinland_outpost_success_value
	}
	

	# Vinland starts off with 0 outposts
	set_global_variable = {
		name = RICE_north_atlantic_vinland_outposts
		value = 0
	}

	if = {
		limit = {
			current_date > 980.1.1 # Approximate date of when Erik the Red discovered Greenland according to the sagas
		}
		set_global_variable = {
			name = RICE_north_atlantic_greenland_struggle_started
			value = yes
		}
		RICE_enable_greenland_struggle_effect = yes
		struggle:RICE_greenland_struggle = { set_culture_as_involved = culture:greenlandic }	
		character:RICE_north_atlantic_001 = {
			make_unprunable = yes
			add_to_global_variable_list = {
				name = RICE_north_atlantic_erik_the_red
				target = this
			}	
		}
	}

	if = {
		limit = {
			current_date > 1000.1.1 # Approximate date of the Norse arriving in Vinland
		}
		set_global_variable = {
			name = RICE_north_atlantic_vinland_discovered
			value = yes
		}
		#struggle:RICE_greenland_struggle = { set_culture_as_involved = culture:vinlandic }	
		character:RICE_north_atlantic_002 = {
			make_unprunable = yes
			add_to_global_variable_list = {
				name = RICE_north_atlantic_leif_erikson_equivalent
				target = this
			}	
		}
	}

}


RICE_enable_greenland_struggle_effect = {
	start_struggle = {
		struggle_type = RICE_greenland_struggle
		start_phase = struggle_RICE_greenland_phase_settlement
	}
}


RICE_greenland_annual_values_calculator_effect = {
	if = {
		limit = {
			exists = struggle:RICE_greenland_struggle
		}


		RICE_greenland_values_restart_calculator_effect = yes

		# Calculate Chances
		set_global_variable = {
			name = RICE_greenland_vinland_viability_chances
			value = RICE_north_atlantic_vinland_outpost_success_value
		}

		# SETTLEMENT PHASE
		# Resilience and Networks increase up to 10
		# Pressures decrease up to 5
		if = {
			limit = {
				struggle:RICE_greenland_struggle = {
					is_struggle_phase = struggle_RICE_greenland_phase_settlement
				}				
			}
			# Resilience
			random_list = {
				10 = {

				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 1
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 2
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 3
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 4
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 5
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 6
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 7
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 8
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 9
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 10
					}
				}
			}
			# Networks
			random_list = {
				10 = {

				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = 1
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = 2
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = 3
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = 4
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = 5
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = 6
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = 7
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = 8
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = 9
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = 10
					}
				}
			}
		}
		# INTEGRATION PHASE
		# Resilience and Networks increase up to 5; up to 3 after changes
		# Pressures decrease up to 5; up to 3 after changes
		else_if = {
			limit = {
				struggle:RICE_greenland_struggle = {
					is_struggle_phase = struggle_RICE_greenland_phase_integration
				}				
			}
			# Resilience
			random_list = {
				10 = {

				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 1
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 2
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 3
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_environmental_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 4
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_environmental_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 5
					}
				}
			}
			# Networks
			random_list = {
				10 = {

				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = 1
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = 2
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = 3
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_socio_economic_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_networks
						add = 4
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_socio_economic_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_networks
						add = 5
					}
				}
			}
		}
		# SUBSISTENCE PHASE
		# Resilience and Networks randomly change between -3 to 3; only negative after changes
		# Pressures decrease up to 3; up to 5 after changes
		else_if = {
			limit = {
				struggle:RICE_greenland_struggle = {
					is_struggle_phase = struggle_RICE_greenland_phase_subsistence
				}				
			}
			# Resilience
			random_list = {
				10 = {

				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = -1
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = -2
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = -3
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_environmental_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 1
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_environmental_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 2
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_environmental_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_resilience
						add = 3
					}
				}
			}
			# Networks
			random_list = {
				10 = {

				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = -1
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = -2
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = -3
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_socio_economic_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_networks
						add = 1
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_socio_economic_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_networks
						add = 2
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_socio_economic_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_networks
						add = 3
					}
				}
			}
		}
		# MARGINALIZATION PHASE
		# Resilience and Networks randomly decrease up to 5; up to 10 after changes
		else_if = {
			limit = {
				struggle:RICE_greenland_struggle = {
					is_struggle_phase = struggle_RICE_greenland_phase_subsistence
				}				
			}
			# Resilience
			random_list = {
				10 = {

				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = -1
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = -2
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = -3
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = -4
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_resilience
						add = -5
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_environmental_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_resilience
						add = -6
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_environmental_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_resilience
						add = -7
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_environmental_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_resilience
						add = -8
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_environmental_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_resilience
						add = -9
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_environmental_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_resilience
						add = -10
					}
				}
			}
			# Networks
			random_list = {
				10 = {

				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = -1
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = -2
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = -3
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = -4
					}
				}
				10 = {
					change_global_variable = {
						name = RICE_greenland_networks
						add = -5
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_socio_economic_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_networks
						add = -6
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_socio_economic_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_networks
						add = -7
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_socio_economic_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_networks
						add = -8
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_socio_economic_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_networks
						add = -9
					}
				}
				10 = {
					trigger = {
						NOT = { has_global_variable = RICE_greenland_socio_economic_change_triggered }
					}
					change_global_variable = {
						name = RICE_greenland_networks
						add = -10
					}
				}
			}
		}
	}
}

# If it goes too high or too low
RICE_greenland_annual_values_reset_effect = {
	if = {
		limit = {
			global_var:RICE_greenland_resilience > 1000
		}
		set_global_variable = {
			name = RICE_greenland_resilience
			value = 1000
		}
	}
	if = {
		limit = {
			global_var:RICE_greenland_networks > 1000
		}
		set_global_variable = {
			name = RICE_greenland_networks
			value = 1000
		}
	}
	if = {
		limit = {
			global_var:RICE_greenland_resilience < 0
		}
		set_global_variable = {
			name = RICE_greenland_resilience
			value = 0
		}
	}
	if = {
		limit = {
			global_var:RICE_greenland_networks < 0
		}
		set_global_variable = {
			name = RICE_greenland_networks
			value = 0
		}
	}

}


# In case the values are missing for whatever reason
RICE_greenland_values_restart_calculator_effect = {
	if = {
		limit = {
			NOT = { exists = global_var:RICE_greenland_resilience }
		}
		if = {
			limit = {
				struggle:RICE_greenland_struggle = {
					OR = {
						is_struggle_phase = struggle_RICE_greenland_phase_settlement
						is_struggle_phase = struggle_RICE_greenland_phase_integration
					}
				}
			}
			set_global_variable = {
				name = RICE_greenland_resilience
				value = 250
			}
		}
		else = {
			set_global_variable = {
				name = RICE_greenland_resilience
				value = 100
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = global_var:RICE_greenland_networks }
		}
		if = {
			limit = {
				struggle:RICE_greenland_struggle = {
					OR = {
						is_struggle_phase = struggle_RICE_greenland_phase_settlement
						is_struggle_phase = struggle_RICE_greenland_phase_integration
					}
				}
			}
			set_global_variable = {
				name = RICE_greenland_networks
				value = 250
			}
		}
		else = {
			set_global_variable = {
				name = RICE_greenland_networks
				value = 100
			}
		}
	}
}



RICE_notify_greenland_values_effect = {
	# Notify rulers in general
	every_county_in_region = {
		region = RICE_greenland_struggle_region
		holder = {
			add_to_list = RICE_greenland_rulers
		}
	}
	every_in_list = {
		list = RICE_greenland_rulers
		# if = {
		# 	limit = {
		# 		exists = house
		# 		house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
		# 	}
		# 	add_gold = { 0 100 }
		# }
		send_interface_message = {
			type = event_generic_neutral
			title = RICE_greenland_values_notification.title
			custom_description_no_bullet = {
				text = RICE_greenland_values_notification.tooltip
			}
			if = {
				limit = {
					exists = house
					house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
					OR = {
						any_character_struggle = {
							involvement = involved
							is_struggle_type = RICE_greenland_struggle
						}
						any_character_struggle = {
							involvement = interloper
							is_struggle_type = RICE_greenland_struggle
						}
						has_global_variable = RICE_greenland_ending_integration
						has_global_variable = RICE_greenland_ending_indigenous
					}
				}
				#custom_tooltip = RICE_greenland_estate_notification.tooltip
				add_gold = { 0 100 }
				add_prestige = { 0 100 }
				add_piety = { 0 100 }
			}
		}
	}
	# Notify rulers with an Estate in Greenland
	# every_ruler = {
	# 	limit = {
	# 		exists = house
	# 		house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
	# 	}
	# 	add_to_list = RICE_greenland_estate_owners
	# }
	# every_in_list = {
	# 	list = RICE_greenland_estate_owners
	# 	send_interface_message = {
	# 		type = event_generic_neutral
	# 		title = RICE_greenland_estate_notification.title
	# 		custom_tooltip = RICE_greenland_estate_notification.tooltip
	# 	}
	# }
}



make_icelandic_culture_effect = {
	#Convert your, and your whole family's, culture
	set_culture = culture:icelandic
	if = {
		limit = {
			is_married = yes
			any_spouse = { is_landed = no }
		}
		every_spouse = {
			set_culture = culture:icelandic
		}
	}
	if = {
		limit = {
			any_close_family_member = {
				is_landed = no
			}
		}
		every_close_family_member = {
			custom = all_family_members
			limit = {
				is_landed = no
			}
			set_culture = culture:icelandic
		}
	}

	#Convert appropriate vassals, and their family
	if = {
		limit = {
			OR = {
				any_vassal = {
					is_ai = yes
				}
				any_courtier = {
					is_ai = yes
				}			
			}
		}
		every_vassal = {
			limit = {
				is_ai = yes
			}
			set_culture = culture:icelandic
			hidden_effect = {
				if = {
					limit = { any_spouse = { is_landed = no } }
					every_spouse = {
						set_culture = culture:icelandic
					}
				}
				if = {
					limit = {
						any_close_family_member = {
							is_landed = no
						}
					}
					every_close_family_member = {
						limit = {
							is_landed = no
						}
						set_culture = culture:icelandic
					}
				}
			}
		}
		every_courtier = {
			limit = {
				is_ai = yes
			}
			set_culture = culture:icelandic
			hidden_effect = {
				if = {
					limit = { any_spouse = { is_landed = no } }
					every_spouse = {
						set_culture = culture:icelandic
					}
				}
				if = {
					limit = {
						any_close_family_member = {
							is_landed = no
						}
					}
					every_close_family_member = {
						limit = {
							is_landed = no
						}
						set_culture = culture:icelandic
					}
				}
			}
		}
	}
}


RICE_become_erik_the_red_effect = {
	make_unprunable = yes
	add_trait = RICE_explorer
	add_prestige_level = 1
}

RICE_become_leif_erikson_effect = {
	make_unprunable = yes
	add_trait = RICE_explorer
	add_prestige_level = 1
}

RICE_greenland_struggle_integration_ender_effect = {
	give_nickname = RICE_nick_the_explorer
	add_prestige = 1000
	dynasty = { add_dynasty_prestige = 2000 }
}

RICE_greenland_struggle_integration_ending_tooltip_effect = {
	# Negative effects of Socio-Economic and Environmental pressures are greatly reduced
	custom_tooltip = RICE_greenland_struggle_ending_low_resource_mitigation_tt
	# All Involved cultures gain acceptance of each other
	custom_tooltip = RICE_greenland_struggle_ending_culture_acceptance_tt
	# Native American courtiers spawn somewhat less rare in the struggle region
	custom_tooltip = RICE_greenland_struggle_ending_native_american_courtiers_tt
	# Reduced chances of failure when sending expeditions to the West
	custom_tooltip = RICE_greenland_struggle_ending_expedition_success_tt
	# The costs and risks of settling Vinland are greatly reduced
	custom_tooltip = RICE_greenland_struggle_ending_vinland_tt
}

RICE_greenland_struggle_integration_county_modifier_effect = {
	# Counties in the North Atlantic region will receive one of three county modifiers depending on your choice
	custom_description_no_bullet = { text = RICE_greenland_struggle_integration_ending_county_bonus_tt }
}

RICE_greenland_struggle_integration_cultural_ending_effect = {
	every_county_in_region = {
		region = RICE_greenland_struggle_region
		custom = every_county_RICE_greenland_struggle_region
		add_county_modifier = {
			modifier = RICE_greenland_integration_cultural
			years = 50
		}
	}
}

RICE_greenland_struggle_integration_economic_ending_effect = {
	every_county_in_region = {
		region = RICE_greenland_struggle_region
		custom = every_county_RICE_greenland_struggle_region
		add_county_modifier = {
			modifier = RICE_greenland_integration_economic
			years = 50
		}
	}
}

RICE_greenland_struggle_integration_community_ending_effect = {
	every_county_in_region = {
		region = RICE_greenland_struggle_region
		custom = every_county_RICE_greenland_struggle_region
		add_county_modifier = {
			modifier = RICE_greenland_integration_community
			years = 50
		}
	}
}



RICE_greenland_struggle_indigenous_ender_effect = {
	give_nickname = nick_the_great
	add_prestige = 1000
	dynasty = { add_dynasty_prestige = 2000 }
}

RICE_greenland_struggle_indigenous_ending_tooltip_effect = {
	# Negative effects of Socio-Economic and Environmental pressures are greatly reduced
	custom_tooltip = RICE_greenland_struggle_ending_low_resource_mitigation_tt
	# Native American cultures have a chance of gaining various European innovations
	#custom_tooltip = RICE_greenland_struggle_ending_culture_acceptance_tt
	# Native American courtiers spawn much less rare in the struggle region
	custom_tooltip = RICE_greenland_struggle_ending_native_american_courtiers_more_tt
	# Reduced chances of failure when sending expeditions to the West
	custom_tooltip = RICE_greenland_struggle_ending_expedition_success_tt
	# The costs and risks of settling Vinland are greatly reduced
	custom_tooltip = RICE_greenland_struggle_ending_vinland_tt
	# Unlocks the Warriors of the West MAA for Native American heritages
	custom_tooltip = RICE_greenland_struggle_ending_native_american_maa_tt
}

RICE_greenland_struggle_indigenous_county_modifier_effect = {
	# Counties in the North Atlantic region will receive one of three county modifiers depending on your choice
	custom_description_no_bullet = { text = RICE_greenland_struggle_indigenous_ending_county_bonus_tt }
}

RICE_greenland_struggle_abandonment_ending_tooltip_effect = {
	# Various decisions, such as expeditions to the west and supporting Greenland, will no longer be available
	custom_tooltip = RICE_greenland_struggle_ending_no_more_mechanics_tt
	# The estates modifier will be removed from all Houses that have it, and rulers of these Houses will no longer receive their annual payment from Greenland
	custom_tooltip = RICE_greenland_struggle_ending_no_more_estate_bonus_tt
	# Native American courtier spawn will no longer happen in the struggle region
	custom_tooltip = RICE_greenland_struggle_ending_native_american_courtiers_none_tt
}

RICE_greenland_struggle_abandonment_county_modifier_effect = {
	# Counties in the North Atlantic region will receive the Resettled Greenlanders county modifier
	custom_description_no_bullet = { text = RICE_greenland_struggle_abandonment_ending_county_bonus_tt }
}

RICE_north_atlantic_establish_walrus_workshop_inside_effect = {
	add_prestige = 200
	capital_county = {
		add_county_modifier = {
			modifier = RICE_north_atlantic_walrus_carving_workshop_inside_region
		}
	}
}

RICE_north_atlantic_establish_walrus_workshop_outside_effect = {
	add_prestige = 100
	capital_county = {
		add_county_modifier = {
			modifier = RICE_north_atlantic_walrus_carving_workshop_outside_region
		}
	}
}


RICE_north_atlantic_incorporate_inuit_ideas_effect = {
	add_character_modifier = {
		modifier = RICE_north_atlantic_inuit_alliance
	}
	add_prestige_level = -1
	set_global_variable = {
		name = RICE_greenland_adopted_arctic_adaptations
		value = yes
	}
	if = {
		limit = {
			root.culture = culture:greenlandic
			culture:greenlandic = {
				NOT = { has_cultural_tradition = tradition_RICE_arctic_adaptations }
			}
		}
		custom_tooltip = RICE_north_atlantic_incorporate_inuit_ideas_greenlandic_effect
		hidden_effect = {
			culture:greenlandic = {
				add_culture_tradition = tradition_RICE_arctic_adaptations
				remove_variable = tradition_cooldown
				change_cultural_acceptance = {
					target = culture:inuit
					value = 25
					desc = RICE_cultural_acceptance_sharing_ideas_innovations
				}
			}	
		}	
	}
	else_if = {
		limit = {
			NOT = { root.culture = culture:greenlandic }
			root.culture = {
				NOT = { has_cultural_tradition = tradition_RICE_arctic_adaptations }
			}
		}
		custom_tooltip = RICE_north_atlantic_incorporate_inuit_ideas_your_culture_effect
		hidden_effect = {	
			root.culture = {			
				add_culture_tradition = tradition_RICE_arctic_adaptations
				remove_variable = tradition_cooldown
				change_cultural_acceptance = {
					target = culture:inuit
					value = 25
					desc = RICE_cultural_acceptance_sharing_ideas_innovations
				}
			}			
		}
	}
}


RICE_greenland_learn_dog_sleds_effect = {
	culture:greenlandic = {
		add_innovation = innovation_RICE_dog_sleds
	}
	if = {
		limit = {
			NOT = { scope:adopter.culture = culture:greenlandic }
		}
		scope:adopter.culture = {
			add_innovation = innovation_RICE_dog_sleds
		}
	}
}

RICE_greenland_learn_toggling_harpoons_effect = {
	culture:greenlandic = {
		add_innovation = innovation_RICE_toggling_harpoons
	}
	if = {
		limit = {
			NOT = { scope:adopter.culture = culture:greenlandic }
		}
		scope:adopter.culture = {
			add_innovation = innovation_RICE_toggling_harpoons
		}
	}
}

RICE_greenland_learn_arctic_boats_effect = {
	culture:greenlandic = {
		add_innovation = innovation_RICE_arctic_boats
	}
	if = {
		limit = {
			NOT = { scope:adopter.culture = culture:greenlandic }
		}
		scope:adopter.culture = {
			add_innovation = innovation_RICE_arctic_boats
		}
	}
}


RICE_north_atlantic_attract_greenland_immigrants_effect = {
	add_prestige = 100
	every_held_title = {
		custom = RICE_every_held_county
		limit = {
			tier = tier_county
		}
		add_county_modifier = {
			modifier = RICE_north_atlantic_immigration_from_greenland
			years = 10
		}
	}
}


RICE_native_american_warrior_spawn_effect = {
	spawn_army = {
		levies = 200
		men_at_arms = {
			type = light_footmen
			stacks = 2
		}
		men_at_arms = {
			type = bowmen
			stacks = 1
		}
		location = capital_province
		#inheritable = no
		name = RICE_native_american_spawn_event_troops
	}
}

RICE_greenlandic_remove_nonsensical_traditions_effect = {
	# It's cold af
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_gardening
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_gardening
		}
	}
	# No flood plains in Greenland
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_agrarian
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_agrarian
		}
	}
	# Not many cities
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_parochialism
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_parochialism
		}
	}
	# Duh
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_dryland_dwellers
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_dryland_dwellers
		}
	}
	# Lol
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_jungle_dwellers
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_jungle_dwellers
		}
	}
	# Lol again
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_wetlanders
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_wetlanders
		}
	}
	# No jungle cities in the north
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_hidden_cities
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_hidden_cities
		}
	}
	# No castles up here
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_castle_keepers
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_castle_keepers
		}
	}
	# No big cities either
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_city_keepers
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_city_keepers
		}
	}
	# Woolly mammoths are extinct
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_lords_of_the_elephant
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_lords_of_the_elephant
		}
	}
	# Very far from the Sahara
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_saharan_nomads
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_saharan_nomads
		}
	}
	# Not in the Himalayas
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_himalayan_settlers
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_himalayan_settlers
		}
	}
	# No desert nomads
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_desert_nomads
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_desert_nomads
		}
	}
	# Unlikely to naturally develop in the region due to types of food available
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_vegetarianism
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_vegetarianism
		}
	}
	# No Nile river here
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_RICE_children_of_the_nile
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_RICE_children_of_the_nile
		}
	}
	# No Silk Road here either
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_RICE_silk_road
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_RICE_silk_road
		}
	}
	# Not near Pamir/Hindu Kush region
	if = {
		limit = {
			scope:new_culture = {
				has_cultural_tradition = tradition_RICE_beyond_the_reach_of_eagles
			}
		}
		scope:new_culture = {
			remove_culture_tradition = tradition_RICE_beyond_the_reach_of_eagles
		}
	}
}

RICE_create_icelandic_effect = {
	if = {
		limit = {
			title:c_vestisland = {
				culture = { has_cultural_pillar = heritage_north_germanic }
			}
		}
		title:c_vestisland = {
			set_county_culture = culture:icelandic
		}
	}
	if = {
		limit = {
			title:c_vestisland.holder = {
				culture = { has_cultural_pillar = heritage_north_germanic }
			}
		}
		title:c_vestisland.holder = {
			make_icelandic_culture_effect = yes
		}
	}
	if = {
		limit = {
			title:c_nordrland = {
				culture = { has_cultural_pillar = heritage_north_germanic }
			}
		}
		title:c_nordrland = {
			set_county_culture = culture:icelandic
		}
	}
	if = {
		limit = {
			title:c_nordrland.holder = {
				culture = { has_cultural_pillar = heritage_north_germanic }
			}
		}
		title:c_nordrland.holder = {
			make_icelandic_culture_effect = yes
		}
	}	
	if = {
		limit = {
			title:c_austisland = {
				culture = { has_cultural_pillar = heritage_north_germanic }
			}
		}
		title:c_austisland = {
			set_county_culture = culture:icelandic
		}
	}
	if = {
		limit = {
			title:c_austisland.holder = {
				culture = { has_cultural_pillar = heritage_north_germanic }
			}
		}
		title:c_austisland.holder = {
			make_icelandic_culture_effect = yes
		}
	}		
	if = {
		limit = {
			title:c_sudurland = {
				culture = { has_cultural_pillar = heritage_north_germanic }
			}
		}
		title:c_sudurland = {
			set_county_culture = culture:icelandic
		}
	}
	if = {
		limit = {
			title:c_sudurland.holder = {
				culture = { has_cultural_pillar = heritage_north_germanic }
			}
		}
		title:c_sudurland.holder = {
			make_icelandic_culture_effect = yes
		}
	}
}

RICE_iceland_decision_effect = {
	add_prestige = 500
	if = {
		limit = {
			NOT = { has_title = title:d_iceland }
		}
		get_title = title:d_iceland
	}
	hidden_effect = {
		RICE_create_icelandic_effect = yes
		if = {
			limit = {
				NOT = { has_title = title:c_vestisland }
				title:c_vestisland.holder = {
					highest_held_title_tier = tier_county
				}
			}
			create_title_and_vassal_change = {
				type = swear_fealty
				save_scope_as = change
				add_claim_on_loss = no
			}
			title:c_vestisland.holder = {
				change_liege = {
					liege = root
					change = scope:change
				}
				resolve_title_and_vassal_change = scope:change
			}
		}
		if = {
			limit = {
				NOT = { has_title = title:c_nordrland }
				title:c_nordrland.holder = {
					highest_held_title_tier = tier_county
				}
			}
			create_title_and_vassal_change = {
				type = swear_fealty
				save_scope_as = change
				add_claim_on_loss = no
			}
			title:c_nordrland.holder = {
				change_liege = {
					liege = root
					change = scope:change
				}
				resolve_title_and_vassal_change = scope:change
			}
		}
		if = {
			limit = {
				NOT = { has_title = title:c_austisland }
				title:c_austisland.holder = {
					highest_held_title_tier = tier_county
				}
			}
			create_title_and_vassal_change = {
				type = swear_fealty
				save_scope_as = change
				add_claim_on_loss = no
			}
			title:c_austisland.holder = {
				change_liege = {
					liege = root
					change = scope:change
				}
				resolve_title_and_vassal_change = scope:change
			}
		}
		if = {
			limit = {
				NOT = { has_title = title:c_sudurland }
				title:c_sudurland.holder = {
					highest_held_title_tier = tier_county
				}
			}
			create_title_and_vassal_change = {
				type = swear_fealty
				save_scope_as = change
				add_claim_on_loss = no
			}
			title:c_sudurland.holder = {
				change_liege = {
					liege = root
					change = scope:change
				}
				resolve_title_and_vassal_change = scope:change
			}
		}
	}
}







