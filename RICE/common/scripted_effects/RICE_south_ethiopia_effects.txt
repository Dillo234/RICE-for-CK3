RICE_setup_south_ethiopia_flavor_pack_effect = {


	############################################################
	#
	# RELIGION CHANGES
	#
	############################################################

	if = {
		limit = {
			NOT = { exists = culture:soissons }
		}		
		title:c_dara = {
			set_county_faith = faith:sidama_pagan
		}
		title:c_hadya = {
			set_county_faith = faith:damot_pagan
		}
		title:c_waj = {
			set_county_faith = faith:damot_pagan
		}
		title:c_dara = {
			set_county_faith = faith:sidama_pagan
		}
		title:c_sharka = {
			set_county_faith = faith:sidama_pagan
		}
		title:c_arusi = {
			set_county_faith = faith:sidama_pagan
		}
		title:c_dawaro = {
			set_county_faith = faith:sidama_pagan
		}
		title:c_bali = {
			set_county_faith = faith:sidama_pagan
		}
		title:c_burji = {
			set_county_faith = faith:sidama_pagan
		}
		title:c_damot = {
			set_county_faith = faith:damot_pagan
		}
		title:c_innarya = {
			set_county_faith = faith:damot_pagan
		}
		title:c_showa = {
			set_county_faith = faith:damot_pagan
		}
		title:c_fetegar = {
			set_county_faith = faith:damot_pagan
		}
	}



	############################################################
	#
	# CULTURE CHANGES
	#
	############################################################

	culture:welayta = {
		add_innovation = innovation_RICE_enset
		add_innovation = innovation_RICE_south_ethiopian_walls
		remove_culture_tradition = tradition_festivities
		add_culture_tradition = tradition_mystical_ancestors
		#add_culture_tradition = tradition_family_entrepreneurship
		#add_culture_tradition = tradition_pastoralists
		add_culture_tradition = tradition_RICE_great_rift_valley
		add_culture_tradition = tradition_RICE_cattle_counting_ceremonies
		remove_variable = tradition_cooldown
	}

	culture:sidama = {
		if = {
			limit = { has_cultural_tradition = tradition_equitable }
			remove_culture_tradition = tradition_equitable
		}
		add_innovation = innovation_RICE_enset
		add_innovation = innovation_RICE_south_ethiopian_walls
		add_culture_tradition = tradition_RICE_great_rift_valley
		add_culture_tradition = tradition_RICE_halale
		remove_variable = tradition_cooldown
	}

	culture:aari = {
		add_innovation = innovation_RICE_enset
		add_innovation = innovation_RICE_south_ethiopian_walls
		#add_culture_tradition = tradition_RICE_great_rift_valley
		#remove_variable = tradition_cooldown
	}

	culture:oropom = {
		add_culture_tradition = tradition_RICE_great_rift_valley
		remove_variable = tradition_cooldown
	}

	culture:harla = {
		add_culture_tradition = tradition_RICE_great_rift_valley
		remove_variable = tradition_cooldown
	}

	culture:oromo = {
		add_innovation = innovation_RICE_enset
		remove_culture_tradition = tradition_legalistic
		remove_culture_tradition = tradition_quarrelsome
		#add_culture_tradition = tradition_noble_adoption # Moassa/Moggaasa system
		add_culture_tradition = tradition_RICE_gadaa
		remove_variable = tradition_cooldown
	}

	# every_culture_global = {
	# 	limit = {
	# 		OR = {
	# 			has_cultural_pillar = heritage_akan
	# 			has_cultural_pillar = heritage_yoruba
	# 			has_cultural_pillar = heritage_west_african
	# 			has_cultural_pillar = heritage_senegambian
	# 			has_cultural_pillar = heritage_sahelian
	# 			has_cultural_pillar = heritage_somalian
	# 			has_cultural_pillar = heritage_east_african
	# 			has_cultural_pillar = heritage_berber
	# 			has_cultural_pillar = heritage_central_african
	# 			has_cultural_pillar = heritage_bantu
	# 		}
	# 	}
	# 	add_innovation = innovation_RICE_cloth_currency
	# }

	if = {
		limit = {
			NOT = { exists = culture:soissons }
		}
		title:c_dara = {
			set_county_culture = culture:sidama
		}
		title:c_hadya = {
			set_county_culture = culture:sidama
		}
		title:c_waj = {
			set_county_culture = culture:sidama
		}
		title:c_dara = {
			set_county_culture = culture:sidama
		}
		title:c_sharka = {
			set_county_culture = culture:sidama
		}
		title:c_arusi = {
			set_county_culture = culture:sidama
		}
		title:c_dawaro = {
			set_county_culture = culture:sidama
		}
		title:c_bali = {
			set_county_culture = culture:sidama
		}
		title:c_burji = {
			set_county_culture = culture:sidama
		}
		title:c_sidamo = {
			set_county_culture = culture:oromo
		}
		title:c_marsabit = {
			set_county_culture = culture:oromo
		}
		title:c_fudalhi = {
			set_county_culture = culture:oromo
		}
		title:c_el_waak = {
			set_county_culture = culture:oromo
		}
		title:c_lag_dera = {
			set_county_culture = culture:oromo
		}
		title:c_luuq = {
			set_county_culture = culture:oromo
		}
		title:c_sitti = {
			set_county_culture = culture:harla
		}
		title:c_gabal = {
			set_county_culture = culture:harla
		}
		title:c_harar = {
			set_county_culture = culture:harla
		}
		title:c_hargaya = {
			set_county_culture = culture:harla
		}
		title:c_gidaya = {
			set_county_culture = culture:harla
		}
		title:c_dakkar = {
			set_county_culture = culture:harla
		}
		title:c_fafan = {
			set_county_culture = culture:harla
		}
		title:c_ifat = {
			set_county_culture = culture:ethiopian
		}
	}



	############################################################
	#
	# HISTORY/TITLE CHANGES
	#
	############################################################

	if = {
		limit = {
			NOT = { exists = culture:soissons }
		}
		every_ruler = {
			limit = {
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}
				capital_county = {
					culture = culture:sidama
				}
			}
			make_sidama_culture_effect = yes
			set_character_faith = faith:sidama_pagan
			every_courtier_or_guest = {
				limit = {
					OR = {
						culture = { has_cultural_pillar = heritage_somalian }
						culture = { has_cultural_pillar = heritage_east_african }
					}
				}
				set_character_faith = faith:sidama_pagan
			}
		}
	
		every_ruler = {
			limit = {
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}
				capital_county = {
					culture = culture:oromo
				}
			}
			make_oromo_culture_effect = yes
			set_character_faith = faith:waaqism_pagan
			every_courtier_or_guest = {
				limit = {
					OR = {
						culture = { has_cultural_pillar = heritage_somalian }
						culture = { has_cultural_pillar = heritage_east_african }
					}
				}
				set_character_faith = faith:waaqism_pagan
			}
		}
	
		every_ruler = {
			limit = {
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}
				capital_county = {
					culture = culture:harla
				}
			}
			make_harla_culture_effect = yes
			# every_courtier_or_guest = {
			# 	limit = {
			# 		OR = {
			# 			culture = { has_cultural_pillar = heritage_somalian }
			# 			culture = { has_cultural_pillar = heritage_east_african }
			# 		}
			# 	}
			# 	set_character_faith = faith:waaqism_pagan
			# }
		}
	
		every_ruler = {
			limit = {
				capital_county = {
					faith = faith:damot_pagan
				}
			}
			set_character_faith = faith:damot_pagan
			every_courtier_or_guest = {
				limit = {
					OR = {
						culture = { has_cultural_pillar = heritage_somalian }
						culture = { has_cultural_pillar = heritage_east_african }
					}
				}
				random = {
					chance = 40
					set_character_faith = faith:damot_pagan
				}
			}
		}
	
	
		title:d_damot.holder = {	
			set_culture = culture:sidama
			make_sidama_culture_effect = yes
			# set_character_faith = faith:damot_pagan
			# every_courtier_or_guest = {
			# 	limit = {
			# 		OR = {
			# 			culture = { has_cultural_pillar = heritage_somalian }
			# 			culture = { has_cultural_pillar = heritage_east_african }
			# 		}
			# 	}
			# 	set_character_faith = faith:damot_pagan
			# }
		}
	
		every_county = {
			limit = {
				culture = culture:oromo
			}
			set_county_faith = faith:waaqism_pagan
		}
	}

	

	

}




make_sidama_culture_effect = {	
	#Convert your, and your whole family's, culture
	set_culture = culture:sidama
	if = {
		limit = {
			any_spouse = {
				is_landed = no				
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}
			}
		}
		every_spouse = {
			limit = {
				is_landed = no				
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}
			}
			set_culture = culture:sidama
		}
	}
	if = {
		limit = {
			any_close_family_member = {
				is_landed = no				
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}
			}
		}
		every_close_family_member = {
			custom = all_family_members
			limit = {
				is_landed = no				
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}
			}
			set_culture = culture:sidama
		}
	}

	#Convert appropriate vassals, and their family
	if = {
		limit = {
			any_vassal = {						
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}			
				capital_county = {
					culture = culture:sidama
				}
			}
		}
		every_vassal = {
			limit = {					
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}			
				capital_county = {
					culture = culture:sidama
				}
			}
			set_culture = culture:sidama
			hidden_effect = {
				if = {
					limit = {
						any_spouse = {
							is_landed = no								
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
					}
					every_spouse = {
						limit = {
							is_landed = no								
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
						set_culture = culture:sidama
					}
				}
				if = {
					limit = {
						any_close_family_member = {
							is_landed = no								
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
					}
					every_close_family_member = {
						custom = all_family_members
						limit = {
							is_landed = no								
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
						set_culture = culture:sidama
					}
				}
				if = {
					limit = {
						any_courtier = {
							is_landed = no								
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
					}
					every_courtier = {
						limit = {
							is_landed = no								
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
						set_culture = culture:sidama
					}
				}
			}
		}
	}

	#Convert appropriate courtiers
	if = {
		limit = {
			any_courtier_or_guest = {									
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}	
			}
		}
		every_courtier_or_guest = {
			limit = {							
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}	
			}
			set_culture = culture:sidama
			hidden_effect = {
				if = {
					limit = {
						any_spouse = {
							is_landed = no											
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
					}
					every_spouse = {
						limit = {
							is_landed = no											
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
						set_culture = culture:sidama
					}
				}
				if = {
					limit = {
						any_close_family_member = {
							is_landed = no											
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
					}
					every_close_family_member = {
						custom = all_family_members
						limit = {
							is_landed = no											
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
						set_culture = culture:sidama
					}
				}
			}
		}
	}
}


make_oromo_culture_effect = {	
	#Convert your, and your whole family's, culture
	set_culture = culture:oromo
	if = {
		limit = {
			any_spouse = {
				is_landed = no										
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}	
			}
		}
		every_spouse = {
			limit = {
				is_landed = no										
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}	
			}
			set_culture = culture:oromo
		}
	}
	if = {
		limit = {
			any_close_family_member = {
				is_landed = no										
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}	
			}
		}
		every_close_family_member = {
			custom = all_family_members
			limit = {
				is_landed = no											
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}	
			}
			set_culture = culture:oromo
		}
	}

	#Convert appropriate vassals, and their family
	if = {
		limit = {
			any_vassal = {							
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}			
				capital_county = {
					culture = culture:oromo
				}
			}
		}
		every_vassal = {
			limit = {							
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}			
				capital_county = {
					culture = culture:oromo
				}
			}
			set_culture = culture:oromo
			hidden_effect = {
				if = {
					limit = {
						any_spouse = {
							is_landed = no									
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
					}
					every_spouse = {
						limit = {
							is_landed = no									
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
						set_culture = culture:oromo
					}
				}
				if = {
					limit = {
						any_close_family_member = {
							is_landed = no									
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
					}
					every_close_family_member = {
						custom = all_family_members
						limit = {
							is_landed = no									
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
						set_culture = culture:oromo
					}
				}
				if = {
					limit = {
						any_courtier = {
							is_landed = no								
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
					}
					every_courtier = {
						limit = {
							is_landed = no								
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
						set_culture = culture:oromo
					}
				}
			}
		}
	}

	#Convert appropriate courtiers
	if = {
		limit = {
			any_courtier_or_guest = {							
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}	
			}
		}
		every_courtier_or_guest = {
			limit = {						
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}	
			}
			set_culture = culture:oromo
			hidden_effect = {
				if = {
					limit = {
						any_spouse = {
							is_landed = no									
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
					}
					every_spouse = {
						limit = {
							is_landed = no									
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
						set_culture = culture:oromo
					}
				}
				if = {
					limit = {
						any_close_family_member = {
							is_landed = no									
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
					}
					every_close_family_member = {
						custom = all_family_members
						limit = {
							is_landed = no									
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
						set_culture = culture:oromo
					}
				}
			}
		}
	}
}





make_harla_culture_effect = {	
	#Convert your, and your whole family's, culture
	set_culture = culture:harla
	if = {
		limit = {
			any_spouse = {
				is_landed = no				
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}
			}
		}
		every_spouse = {
			limit = {
				is_landed = no				
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}
			}
			set_culture = culture:harla
		}
	}
	if = {
		limit = {
			any_close_family_member = {
				is_landed = no				
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}
			}
		}
		every_close_family_member = {
			custom = all_family_members
			limit = {
				is_landed = no				
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}
			}
			set_culture = culture:harla
		}
	}

	#Convert appropriate vassals, and their family
	if = {
		limit = {
			any_vassal = {						
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}			
				capital_county = {
					culture = culture:harla
				}
			}
		}
		every_vassal = {
			limit = {					
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}			
				capital_county = {
					culture = culture:harla
				}
			}
			set_culture = culture:harla
			hidden_effect = {
				if = {
					limit = {
						any_spouse = {
							is_landed = no								
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
					}
					every_spouse = {
						limit = {
							is_landed = no								
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
						set_culture = culture:harla
					}
				}
				if = {
					limit = {
						any_close_family_member = {
							is_landed = no								
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
					}
					every_close_family_member = {
						custom = all_family_members
						limit = {
							is_landed = no								
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
						set_culture = culture:harla
					}
				}
				if = {
					limit = {
						any_courtier = {
							is_landed = no								
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
					}
					every_courtier = {
						limit = {
							is_landed = no								
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
						set_culture = culture:harla
					}
				}
			}
		}
	}

	#Convert appropriate courtiers
	if = {
		limit = {
			any_courtier_or_guest = {									
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}	
			}
		}
		every_courtier_or_guest = {
			limit = {							
				OR = {
					culture = { has_cultural_pillar = heritage_somalian }
					culture = { has_cultural_pillar = heritage_east_african }
				}	
			}
			set_culture = culture:harla
			hidden_effect = {
				if = {
					limit = {
						any_spouse = {
							is_landed = no											
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
					}
					every_spouse = {
						limit = {
							is_landed = no											
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
						set_culture = culture:harla
					}
				}
				if = {
					limit = {
						any_close_family_member = {
							is_landed = no											
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
					}
					every_close_family_member = {
						custom = all_family_members
						limit = {
							is_landed = no											
							OR = {
								culture = { has_cultural_pillar = heritage_somalian }
								culture = { has_cultural_pillar = heritage_east_african }
							}	
						}
						set_culture = culture:harla
					}
				}
			}
		}
	}
}



RICE_south_ethiopia_enset_decision_effect = {

	every_held_county = {
		custom = RICE_every_enset_county
		limit = {
			#tier = tier_county	
			culture = {
				has_innovation = innovation_RICE_enset
			}				
		}
		change_development_progress = minor_development_progress_loss
		change_county_control = 20
		add_county_modifier = {
			modifier = RICE_south_ethiopia_enset_harvest
			years = 20
		}
	}

}
