#############################################
#											#
# STRUGGLE ENDING DECISIONS				    #
#											#
#############################################

# Integration Ending
RICE_greenland_struggle_ending_integration_decision = {
	major = yes
	title = RICE_greenland_struggle_ending_integration_decision
	picture = "gfx/interface/illustrations/decisions/decision_vinland_encounter.dds"
	extra_picture = "gfx/interface/illustrations/struggle_decisions_buttons/RICE_decision_greenland_integration_button.dds"
	desc = RICE_greenland_struggle_ending_integration_decision_desc
	selection_tooltip = RICE_greenland_struggle_ending_integration_decision_tooltip
	confirm_click_sound = "event:/DLC/FP2/SFX/UI/fp2_struggle_ending_decision_confirm"
	is_invisible = yes

	sort_order = 80

	# is_shown = {
	# 	has_fp2_dlc_trigger = yes
	# }

	is_valid = {
		is_independent_ruler = yes

		custom_tooltip = {
			text = RICE_greenland_struggle_integration_decision_correct_phase_tt
			any_character_struggle = {
				is_struggle_type = RICE_greenland_struggle
				is_struggle_phase = struggle_RICE_greenland_phase_integration
			}
		}

		custom_tooltip = {
			text = struggle_ending_decision_correct_involvement_tt
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}
		}

		# Control at least 50% of the struggle region
		custom_tooltip = {
			text = RICE_greenland_struggle_ending_integration_decision_region_tt
			RICE_greenland_struggle_ending_percent_region_trigger = yes
		}

		# random_character_struggle = {
		# 	limit = { is_struggle_type = RICE_greenland_struggle }
		# 	change_struggle_phase = struggle_RICE_greenland_phase_marginalization
		# }

		prestige_level >= very_high_prestige_level # Exalted among Men or higher

	}

	effect = {
		##### Major Effects #####
		 show_as_tooltip = {
		 	RICE_greenland_struggle_integration_ender_effect = yes
		 	RICE_greenland_struggle_integration_ending_tooltip_effect = yes
		 	RICE_greenland_struggle_integration_county_modifier_effect = yes
		}

		show_as_tooltip = {
			stress_impact = {
				lazy = medium_stress_impact_gain
				content = minor_stress_impact_gain
			}
		}

		# Trigger a player facing event as a coda
		trigger_event = north_atlantic.0170
	}

	cost = {}

	ai_check_interval = 120

	ai_potential = { always = yes }

	ai_will_do = { base = 100 }
}


# Indigenous Ending	
RICE_greenland_struggle_ending_indigenous_decision = {
	major = yes
	title = RICE_greenland_struggle_ending_indigenous_decision
	picture = "gfx/interface/illustrations/decisions/decision_inukshuk.dds"
	extra_picture = "gfx/interface/illustrations/struggle_decisions_buttons/RICE_decision_greenland_indigenous_button.dds"
	desc = RICE_greenland_struggle_ending_indigenous_decision_desc
	selection_tooltip = RICE_greenland_struggle_ending_indigenous_decision_tooltip
	confirm_click_sound = "event:/DLC/FP2/SFX/UI/fp2_struggle_ending_decision_confirm"
	is_invisible = yes

	sort_order = 80

	# is_shown = {
	# 	has_fp2_dlc_trigger = yes
	# }

	is_valid = {
		is_independent_ruler = yes

		custom_tooltip = {
			text = RICE_greenland_struggle_integration_decision_correct_phase_tt
			any_character_struggle = {
				is_struggle_type = RICE_greenland_struggle
				is_struggle_phase = struggle_RICE_greenland_phase_integration
			}
		}

		custom_tooltip = {
			text = struggle_ending_decision_correct_involvement_tt
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}
		}

		prestige_level >= very_high_prestige_level # Exalted among Men or higher

	}

	effect = {
		##### Major Effects #####
		show_as_tooltip = {
			RICE_greenland_struggle_indigenous_ender_effect = yes
			RICE_greenland_struggle_indigenous_ending_tooltip_effect = yes
			RICE_greenland_struggle_indigenous_county_modifier_effect = yes
	   }

	   show_as_tooltip = {
		   stress_impact = {
			   lazy = medium_stress_impact_gain
			   content = minor_stress_impact_gain
		   }
	   }

		# Trigger a player facing event as a coda
		trigger_event = north_atlantic.8888
	}

	cost = {}

	ai_check_interval = 120

	ai_potential = { always = yes }

	ai_will_do = { base = 100 }
}


# Abandonment Ending
RICE_greenland_struggle_ending_abandonment_decision = {
	major = yes
	title = RICE_greenland_struggle_ending_abandonment_decision
	picture = "gfx/interface/illustrations/decisions/decision_ice_ship.dds"
	extra_picture = "gfx/interface/illustrations/struggle_decisions_buttons/RICE_decision_greenland_abandonment_button.dds"
	desc = RICE_greenland_struggle_ending_abandonment_decision_desc
	selection_tooltip = RICE_greenland_struggle_ending_abandonment_decision_tooltip
	confirm_click_sound = "event:/DLC/FP2/SFX/UI/fp2_struggle_ending_decision_confirm"
	is_invisible = yes

	sort_order = 80

	# is_shown = {
	# 	has_fp2_dlc_trigger = yes
	# }

	is_valid = {
		is_independent_ruler = yes

		custom_tooltip = {
			text = RICE_greenland_struggle_marginalization_decision_correct_phase_tt
			any_character_struggle = {
				is_struggle_type = RICE_greenland_struggle
				is_struggle_phase = struggle_RICE_greenland_phase_marginalization
			}
		}

		custom_tooltip = {
			text = struggle_ending_decision_correct_involvement_tt
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}
		}

		prestige_level >= very_high_prestige_level # Exalted among Men or higher

	}

	effect = {
		##### Major Effects #####
		show_as_tooltip = {
			#RICE_greenland_struggle_abandonment_ender_effect = yes
			RICE_greenland_struggle_abandonment_ending_tooltip_effect = yes
			RICE_greenland_struggle_abandonment_county_modifier_effect = yes
	   }

	   show_as_tooltip = {
		   stress_impact = {
			   ambitious = medium_stress_impact_gain
			   diligent = minor_stress_impact_gain
		   }
	   }

		# Trigger a player facing event as a coda
		trigger_event = north_atlantic.8888
	}

	cost = {}

	ai_check_interval = 120

	ai_potential = { always = yes }

	ai_will_do = { base = 100 }
}


#############################################
#											#
# MAJOR GREENLAND DECISIONS				    #
#											#
#############################################


# Explore Greenland
RICE_north_atlantic_explore_greenland = {
	picture = "gfx/interface/illustrations/decisions/decision_vinland.dds"

	desc = RICE_north_atlantic_explore_greenland_desc
	selection_tooltip = RICE_north_atlantic_explore_greenland_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		NOT = { exists = struggle:RICE_greenland_struggle }
		NOT = { has_global_variable = RICE_north_atlantic_greenland_struggle_started }
		exists = dynasty
		highest_held_title_tier > tier_barony
		is_landed = yes
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_greenland_struggle_region	
			}
		}
	}
	
	is_valid = {
		OR = {
			prestige_level >= 3
			custom_description = {
				text = "is_king_or_emperor"
				highest_held_title_tier >= tier_kingdom
			}
		}
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {

		custom_tooltip = RICE_north_atlantic_explore_greenland_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_explore_greenland_effect_tooltip_2
		custom_tooltip = RICE_north_atlantic_explore_greenland_effect_tooltip_3

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_explore_greenland_context_tooltip
		}

		trigger_event = {
			id = north_atlantic.0030 # Have some default courtier options, or allow time to wait for a pick
									# Event notification to other players in the region
		}

	}

	cost = { 
		gold = 200 # Will depend
	}	

	ai_potential = {
		short_term_gold > 200
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = -5
			has_trait = content
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = -5
			has_trait = craven
		}
		modifier = {
			add = 5
			has_trait = brave
		}
		modifier = {
			add = 25
			# Happened late 900s IRL
			current_date >= 950.1.1
		}
		modifier = {
			add = 50
			# Happened late 900s IRL
			current_date >= 975.1.1
		}
		modifier = {
			add = 75
			# Happened late 900s IRL
			current_date >= 1000.1.1
		}
		modifier = {
			add = 100
			# Happened late 900s IRL
			current_date >= 1025.1.1
		}
	}
}


# Explore Vinland
RICE_north_atlantic_explore_vinland = {
	picture = "gfx/interface/illustrations/decisions/decision_vinland.dds"

	desc = RICE_north_atlantic_explore_vinland_desc
	selection_tooltip = RICE_north_atlantic_explore_vinland_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		exists = struggle:RICE_greenland_struggle		
		NOT = { has_global_variable = RICE_north_atlantic_vinland_discovered }
		exists = dynasty
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			exists = struggle:RICE_greenland_struggle
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		OR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}		
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
		#debug_only = yes
	}
	
	is_valid = {
		OR = {
			#custom_tooltip = {
			#	text = struggle_ending_decision_correct_involvement_tt
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			#}	
			AND = {
				custom_description = {
					text = RICE_greenland_struggle_region_req
					any_held_title = {
						tier = tier_county
						any_county_province = {
							geographical_region = RICE_greenland_struggle_region		
						}
					}
				}
				custom_description = {
					text = RICE_greenland_struggle_good_ending_req
					OR = {
						has_global_variable = RICE_greenland_ending_integration
						has_global_variable = RICE_greenland_ending_indigenous
					}
				}
			}		
		}
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {

		custom_tooltip = RICE_north_atlantic_explore_vinland_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_explore_vinland_effect_tooltip_2
		custom_tooltip = RICE_north_atlantic_explore_vinland_effect_tooltip_3


		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_explore_vinland_context_tooltip
		}

		trigger_event = {
			id = north_atlantic.8888 # Have some default courtier options, or allow time to wait for a pick
									# Event notification to other players in the region
		}

	}

	cost = { 
		gold = 200 # Will depend
	}	

	ai_potential = {
		short_term_gold > 200
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = -5
			has_trait = content
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = -5
			has_trait = craven
		}
		modifier = {
			add = 5
			has_trait = brave
		}
		modifier = {
			add = 25
			# Happened early 1000s IRL
			current_date >= 980.1.1
		}
		modifier = {
			add = 50
			# Happened early 1000s IRL
			current_date >= 1000.1.1
		}
		modifier = {
			add = 75
			# Happened early 1000s IRL
			current_date >= 1020.1.1
		}
		modifier = {
			add = 100
			# Happened early 1000s IRL
			current_date >= 1040.1.1
		}
	}
}


# Settle Vinland
RICE_north_atlantic_settle_vinland = {
	picture = "gfx/interface/illustrations/decisions/decision_vinland_encounter.dds"

	desc = RICE_north_atlantic_settle_vinland_desc
	selection_tooltip = RICE_north_atlantic_settle_vinland_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		#exists = struggle:RICE_greenland_struggle
		has_global_variable = RICE_north_atlantic_vinland_discovered
		NOT = { has_global_variable = RICE_north_atlantic_vinland_colonized }
		exists = dynasty
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			exists = struggle:RICE_greenland_struggle
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_greenland_struggle_region		
			}
		}
		OR = {
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		NOT = {
			dynasty = { has_dynasty_modifier = RICE_north_atlantic_vinland_settlement }
		}
		global_var:RICE_north_atlantic_vinland_outposts > 0
		#debug_only = yes
	}
	
	is_valid = {
		custom_description = {
			text = RICE_greenland_struggle_region_req
			any_held_title = {
				tier = tier_county
				any_county_province = {
					geographical_region = RICE_greenland_struggle_region		
				}
			}
		}	
		OR = {
			#custom_tooltip = {
			#	text = struggle_ending_decision_correct_involvement_tt
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			#}			
			custom_description = {
				text = RICE_greenland_struggle_good_ending_req
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
		OR = {
			prestige_level >= 3
			custom_description = {
				text = "is_king_or_emperor"
				highest_held_title_tier >= tier_kingdom
			}
		}
		dynasty = {
			has_dynasty_modifier = RICE_north_atlantic_vinland_outpost
		}
		global_var:RICE_north_atlantic_vinland_outposts > 0
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {

		show_as_tooltip = {
			dynasty = {
				add_dynasty_modifier = {
					modifier = RICE_north_atlantic_vinland_settlement
				}
			}
		}

		custom_tooltip = RICE_north_atlantic_settle_vinland_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_settle_vinland_effect_tooltip_2
		custom_tooltip = RICE_north_atlantic_settle_vinland_effect_tooltip_3
		custom_tooltip = RICE_north_atlantic_settle_vinland_effect_tooltip_4


		if = {
			limit = {
				NOR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
			custom_tooltip = RICE_north_atlantic_settle_vinland_effect_tooltip_5
		}

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_settle_vinland_context_tooltip
		}

		trigger_event = {
			id = north_atlantic.8888 # Have some default courtier options, or allow time to wait for a pick
									# Event notification to other players in the region
		}

	}

	cost = { 
		gold = monumental_gold_value #massive_gold_value # Will depend
	}	

	ai_potential = {
		short_term_gold > monumental_gold_value #massive_gold_value
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = -5
			has_trait = content
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = -5
			has_trait = craven
		}
		modifier = {
			add = 5
			has_trait = brave
		}
		modifier = {
			add = 25
			# Happened early 1000s IRL
			current_date >= 980.1.1
		}
		modifier = {
			add = 50
			# Happened early 1000s IRL
			current_date >= 1000.1.1
		}
		modifier = {
			add = 75
			# Happened early 1000s IRL
			current_date >= 1020.1.1
		}
		modifier = {
			add = 100
			# Happened early 1000s IRL
			current_date >= 1040.1.1
		}
	}
}


#############################################
#											#
# OTHER MAJOR DECISIONS					    #
#											#
#############################################



# Form the Icelandic Commonwealth
RICE_north_atlantic_form_iceland = {
	picture = "gfx/interface/illustrations/decisions/decision_north_european_council.dds"

	desc = RICE_north_atlantic_form_iceland_desc
	selection_tooltip = RICE_north_atlantic_form_iceland_tooltip
	major = yes

	ai_check_interval = 24

	is_shown = {
		is_landed = yes
		OR = {
			has_title = title:c_vestisland
			has_title = title:c_nordrland
			has_title = title:c_austisland
			has_title = title:c_sudurland
		}
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:RICE_north_atlantic_iceland_formed_flag
			}
		}
	}
	
	is_valid = {
		culture = {
			has_cultural_pillar = heritage_north_germanic
		}
		capital_county = {
			title:d_iceland = {
				is_de_jure_liege_or_above_target = prev
			}
		}
		prestige_level >= 3
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {

		#Can only happen once
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:RICE_north_atlantic_iceland_formed_flag
		}

		save_scope_as = althing_convener

		culture:norse = {
			save_scope_as = norse
		}

		culture:irish = {
			save_scope_as = irish
		}

		culture:icelandic = {
			save_scope_as = icelandic
		}

		custom_tooltip = RICE_north_atlantic_form_iceland_effect_tooltip_1

		show_as_tooltip = {
			RICE_iceland_decision_effect = yes
		}

		custom_tooltip = RICE_north_atlantic_form_iceland_effect_tooltip_2
		custom_tooltip = RICE_north_atlantic_form_iceland_effect_tooltip_3

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_form_iceland_context_tooltip
		}

		trigger_event = north_atlantic.0022


	}

	cost = { 
		gold = { value = medium_gold_value } # Cheaper if you have an estate in Greenland
	}	

	ai_potential = {
		short_term_gold > medium_gold_value
	}

	ai_will_do = {
		base = 60
		modifier = {
			add = 15
			# Happened in 930 IRL
			current_date >= 920.1.1
		}
		modifier = {
			add = 15
			# Happened in 930 IRL
			current_date >= 930.1.1
		}
		modifier = {
			add = 15
			# Happened in 930 IRL
			current_date >= 940.1.1
		}
		modifier = {
			add = 15
			# Happened in 930 IRL
			current_date >= 950.1.1
		}
		modifier = {
			add = -5
			has_trait = lazy
		}
		modifier = {
			add = 5
			has_trait = diligent
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = 5
			has_trait = greedy
		}
	}
}


# Walrus Ivory Carving center - Scandinavia
RICE_north_atlantic_walrus_ivory_workshop_scandinavia = {
	picture = "gfx/interface/illustrations/decisions/decision_european_port.dds"

	desc = RICE_north_atlantic_walrus_ivory_workshop_scandinavia_desc
	selection_tooltip = RICE_north_atlantic_walrus_ivory_workshop_scandinavia_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		exists = struggle:RICE_greenland_struggle
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}
			any_character_struggle = {
				involvement = interloper
				is_struggle_type = RICE_greenland_struggle
			}
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
	}
	
	is_valid = {
		#custom_tooltip = {
			#	text = struggle_ending_decision_correct_involvement_tt
			OR = {
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
				any_character_struggle = {
					involvement = interloper
					is_struggle_type = RICE_greenland_struggle
				}
				AND = {
					custom_description = {
						text = RICE_greenland_struggle_region_req
						any_held_title = {
							tier = tier_county
							any_county_province = {
								geographical_region = RICE_greenland_struggle_region		
							}
						}
					}
					custom_description = {
						text = RICE_greenland_struggle_good_ending_req
						OR = {
							has_global_variable = RICE_greenland_ending_integration
							has_global_variable = RICE_greenland_ending_indigenous
						}
					}
				}
			}
		#}
		custom_tooltip = {
			text = RICE_greenland_struggle_integration_or_settlement_phase
			any_character_struggle = {
				is_struggle_type = RICE_greenland_struggle
				OR = {
					is_struggle_phase = struggle_RICE_greenland_phase_settlement
					is_struggle_phase = struggle_RICE_greenland_phase_integration
				}
			}
		}
		capital_county = {
			is_coastal_county = yes
			#development_level >= 25
			any_county_struggle = { is_struggle_type = RICE_greenland_struggle }
		}
		OR = {
			prestige_level >= 3
			custom_description = {
				text = "is_king_or_emperor"
				highest_held_title_tier >= tier_kingdom
			}
		}
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		show_as_tooltip = {
			RICE_north_atlantic_establish_walrus_workshop_inside_effect = yes
		}

		custom_tooltip = RICE_north_atlantic_walrus_ivory_workshop_scandinavia_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_walrus_ivory_workshop_scandinavia_effect_tooltip_2
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_walrus_ivory_workshop_scandinavia_context_tooltip
		}

		trigger_event = {
			id = north_atlantic.8888
		}

	}

	cost = { 
		gold = { value = medium_gold_value }
	}	

	ai_potential = {
		short_term_gold > medium_gold_value
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = -5
			has_trait = lazy
		}
		modifier = {
			add = 5
			has_trait = diligent
		}
		modifier = {
			add = -5
			has_trait = content
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
	}
}


# Walrus Ivory Carving center - Europe
RICE_north_atlantic_walrus_ivory_workshop_europe = {
	picture = "gfx/interface/illustrations/decisions/decision_european_port.dds"

	desc = RICE_north_atlantic_walrus_ivory_workshop_europe_desc
	selection_tooltip = RICE_north_atlantic_walrus_ivory_workshop_europe_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		highest_held_title_tier > tier_barony
		is_landed = yes
		NOR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}
			any_character_struggle = {
				involvement = interloper
				is_struggle_type = RICE_greenland_struggle
			}
		}
		NOT = {
			any_held_title = {
				tier = tier_county
				any_county_province = {
					geographical_region = RICE_greenland_struggle_region		
				}
			}
		}
		OR = {			
			exists = struggle:RICE_greenland_struggle
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		#NOR = {			
		#	has_global_variable = RICE_greenland_ending_abandonment
		#	has_global_variable = RICE_greenland_ending_collapse
		#}
		capital_county = {
			any_county_province = {
				is_coastal = yes
				has_holding = yes
				geographical_region = world_europe
				NOT = { geographical_region = RICE_greenland_struggle_region }	
			}
		}
	}
	
	is_valid = {
		#custom_tooltip = {
			#	text = struggle_ending_decision_correct_involvement_tt
			NOR = {
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
				any_character_struggle = {
					involvement = interloper
					is_struggle_type = RICE_greenland_struggle
				}
			}
		#}
		custom_tooltip = {
			text = RICE_greenland_struggle_integration_or_settlement_phase
			struggle:RICE_greenland_struggle = {
				OR = {
					is_struggle_phase = struggle_RICE_greenland_phase_settlement
					is_struggle_phase = struggle_RICE_greenland_phase_integration
				}
			}
		}
		capital_county = {
			any_county_province = {
				is_coastal = yes
				has_holding = yes
				geographical_region = world_europe
				NOT = { geographical_region = RICE_greenland_struggle_region }	
			}
		}
		OR = {
			prestige_level >= 3
			custom_description = {
				text = "is_king_or_emperor"
				highest_held_title_tier >= tier_kingdom
			}
		}
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		show_as_tooltip = {
			RICE_north_atlantic_establish_walrus_workshop_outside_effect = yes
		}

		custom_tooltip = RICE_north_atlantic_walrus_ivory_workshop_europe_effect_tooltip_1

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_walrus_ivory_workshop_europe_context_tooltip
		}

		trigger_event = {
			id = north_atlantic.8888
		}

	}

	cost = { 
		gold = { value = medium_gold_value }
	}	

	ai_potential = {
		short_term_gold > medium_gold_value
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = -10
			has_trait = lazy
		}
		modifier = {
			add = 5
			has_trait = diligent
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = 5
			has_trait = greedy
		}
	}
}


# Incorporate Inuit Ideas
RICE_north_atlantic_incorporate_inuit_ideas = {
	picture = "gfx/interface/illustrations/decisions/decision_inukshuk.dds"

	desc = RICE_north_atlantic_incorporate_inuit_ideas_desc
	selection_tooltip = RICE_north_atlantic_incorporate_inuit_ideas_tooltip
	major = yes

	ai_check_interval = 120

	is_shown = {
		exists = struggle:RICE_greenland_struggle
		highest_held_title_tier > tier_barony
		is_landed = yes
		has_global_variable = RICE_greenland_inuit_are_here
		NOT = { has_global_variable = RICE_greenland_adopted_arctic_adaptations }
		OR = {
			AND = {				
				exists = struggle:RICE_greenland_struggle
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			}
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
		culture:greenlandic = {
			NOT = { has_cultural_tradition = tradition_RICE_arctic_adaptations }
		}
	}
	
	is_valid = {
		custom_tooltip = {
			text = RICE_greenland_inuit_arrive_req		
			has_global_variable = RICE_greenland_inuit_are_here
		}
		custom_tooltip = {
			text = RICE_greenland_adopt_inuit_ideas_networks_req		
			global_var:RICE_greenland_networks > 800
		}
		#custom_tooltip = {
			#	text = struggle_ending_decision_correct_involvement_tt		
			OR = {
				AND = {				
					exists = struggle:RICE_greenland_struggle
					any_character_struggle = {
						involvement = involved
						is_struggle_type = RICE_greenland_struggle
					}
				}
				AND = {
					custom_description = {
						text = RICE_greenland_struggle_region_req
						any_held_title = {
							tier = tier_county
							any_county_province = {
								geographical_region = RICE_greenland_struggle_region		
							}
						}
					}
					custom_description = {
						text = RICE_greenland_struggle_good_ending_req
						OR = {
							has_global_variable = RICE_greenland_ending_integration
							has_global_variable = RICE_greenland_ending_indigenous
						}
					}
				}
			}
		#}
		OR = {
			prestige_level >= 5
			custom_description = {
				text = "is_king_or_emperor"
				highest_held_title_tier >= tier_kingdom
			}
		}
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {

		save_scope_as = adopter

		culture:greenlandic = {
			save_scope_as = greenlandic
		}

		culture:inuit = {
			save_scope_as = inuit
		}

		show_as_tooltip = {
			RICE_north_atlantic_incorporate_inuit_ideas_effect = yes
		}

		#custom_tooltip = RICE_north_atlantic_incorporate_inuit_ideas_effect_tooltip_1

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_incorporate_inuit_ideas_context_tooltip
		}

		trigger_event = {
			id = north_atlantic.8888
		}

	}

	cost = { 
		prestige = { value = monumental_prestige_value }
	}	

	ai_potential = {
		prestige > monumental_prestige_value
	}

	ai_will_do = {
		base = 20
		modifier = {
			add = -5
			has_trait = zealous
		}
		modifier = {
			add = 5
			has_trait = paranoid
		}
	}
}




#############################################
#											#
# NORMAL GREENLAND DECISIONS			    #
#											#
#############################################


# Establish a family estate in Greenland
RICE_north_atlantic_family_estate_greenland = {
	picture = "gfx/interface/illustrations/decisions/decision_longship.dds"

	desc = RICE_north_atlantic_family_estate_greenland_desc
	selection_tooltip = RICE_north_atlantic_family_estate_greenland_tooltip
	major = yes

	ai_check_interval = 60

	is_shown = {
		exists = house
		NOT = { house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate } }
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			exists = struggle:RICE_greenland_struggle			
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		OR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}			
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
	}
	
	is_valid = {
		OR = {
			#custom_tooltip = {
				#	text = struggle_ending_decision_correct_involvement_tt
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			#}
			AND = {
				custom_description = {
					text = RICE_greenland_struggle_region_req
					any_held_title = {
						tier = tier_county
						any_county_province = {
							geographical_region = RICE_greenland_struggle_region		
						}
					}
				}
				custom_description = {
					text = RICE_greenland_struggle_good_ending_req
					OR = {
						has_global_variable = RICE_greenland_ending_integration
						has_global_variable = RICE_greenland_ending_indigenous
					}
				}
			}
		}
		#is_house_head = yes
		#NOT = { house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate } }
		# RICE_north_atlantic_vinland_outposts
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {

		save_scope_as = establisher

		house = {
			add_house_modifier = {
				modifier = RICE_north_atlantic_greenland_family_estate
			}
		}
		dynasty = {
			add_dynasty_prestige = 100
		}
		add_prestige = 200

		custom_tooltip = RICE_north_atlantic_family_estate_greenland_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_family_estate_greenland_effect_tooltip_2
		custom_tooltip = RICE_north_atlantic_family_estate_greenland_effect_tooltip_3

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_family_estate_greenland_context_tooltip
		}

		house = {
			every_house_member = {
				limit = {
					is_landed = yes
				}
				trigger_event = north_atlantic.0020
				# Change to immediately later
				#trigger_event = {
				#	id = north_atlantic.0020
				#	days = 1
				#}
			}
		}

	}

	cost = { 
		gold = RICE_north_atlantic_establish_estate_cost # Will depend
	}	

	ai_potential = {
		short_term_gold > RICE_north_atlantic_establish_estate_cost
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = -5
			has_trait = content
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = -5
			has_trait = craven
		}
		modifier = {
			add = 5
			has_trait = brave
		}
		modifier = {
			add = 25
			# Happened early 1000s IRL
			current_date >= 980.1.1
		}
		modifier = {
			add = 50
			# Happened early 1000s IRL
			current_date >= 1000.1.1
		}
		modifier = {
			add = 75
			# Happened early 1000s IRL
			current_date >= 1020.1.1
		}
		modifier = {
			add = 100
			# Happened early 1000s IRL
			current_date >= 1040.1.1
		}
	}
}


# Attempt to Build an Outpost in Vinland
RICE_north_atlantic_build_outpost_vinland = {
	picture = "gfx/interface/illustrations/decisions/decision_vinland_skyrim.dds"

	desc = RICE_north_atlantic_build_outpost_vinland_desc
	selection_tooltip = RICE_north_atlantic_build_outpost_vinland_tooltip
	major = yes

	ai_check_interval = 60

	is_shown = {
		exists = dynasty
		#NOT = { house = { has_house_modifier = RICE_north_atlantic_settled_vinland } }
		has_global_variable = RICE_north_atlantic_vinland_discovered
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			exists = struggle:RICE_greenland_struggle			
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		OR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}			
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
		NOT = { dynasty = { has_dynasty_modifier = RICE_north_atlantic_vinland_outpost } }
	}
	
	is_valid = {
		OR = {
			#custom_tooltip = {
				#	text = struggle_ending_decision_correct_involvement_tt
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			#}
			AND = {
				custom_description = {
					text = RICE_greenland_struggle_region_req
					any_held_title = {
						tier = tier_county
						any_county_province = {
							geographical_region = RICE_greenland_struggle_region		
						}
					}
				}
				custom_description = {
					text = RICE_greenland_struggle_good_ending_req
					OR = {
						has_global_variable = RICE_greenland_ending_integration
						has_global_variable = RICE_greenland_ending_indigenous
					}
				}
			}
		}
		#is_house_head = yes
		#NOT = { house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate } }
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		# dynasty = {
		# 	add_dynasty_modifier = {
		# 		modifier = RICE_north_atlantic_vinland_outpost
		# 	}
		# }

		custom_tooltip = RICE_north_atlantic_build_outpost_vinland_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_build_outpost_vinland_effect_tooltip_2
		custom_tooltip = RICE_north_atlantic_build_outpost_vinland_effect_tooltip_3

		if = {
			limit = {
				NOR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
			custom_tooltip = RICE_north_atlantic_build_outpost_vinland_effect_tooltip_4
		}

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_build_outpost_vinland_context_tooltip
		}

		trigger_event = north_atlantic.0140

	}

	cost = { 
		gold = major_gold_value # Will depend
	}	

	ai_potential = {
		short_term_gold > major_gold_value
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = -5
			has_trait = content
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = -5
			has_trait = craven
		}
		modifier = {
			add = 5
			has_trait = brave
		}
		modifier = {
			add = 25
			# Happened early 1000s IRL
			current_date >= 980.1.1
		}
		modifier = {
			add = 50
			# Happened early 1000s IRL
			current_date >= 1000.1.1
		}
		modifier = {
			add = 75
			# Happened early 1000s IRL
			current_date >= 1020.1.1
		}
		modifier = {
			add = 100
			# Happened early 1000s IRL
			current_date >= 1040.1.1
		}
	}
}


# Organize a hunting trip in Nordsetur, Greenland
RICE_north_atlantic_hunting_trip = {
	picture = "gfx/interface/illustrations/decisions/decision_ice_ship.dds"

	desc = RICE_north_atlantic_hunting_trip_desc
	selection_tooltip = RICE_north_atlantic_hunting_trip_tooltip

	ai_check_interval = 60

	cooldown = { days = 3650 }

	is_shown = {
		exists = house
		house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			exists = struggle:RICE_greenland_struggle			
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		OR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
	}
	
	is_valid = {
		custom_description = {
			text = RICE_current_nordsetur_hunt_req
			NOT = { any_owned_story = { story_type = RICE_story_cycle_north_atlantic_nordsetur_hunt } }
		}		
		OR = {
			#custom_tooltip = {
				#	text = struggle_ending_decision_correct_involvement_tt
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			#}
			AND = {
				custom_description = {
					text = RICE_greenland_struggle_region_req
					any_held_title = {
						tier = tier_county
						any_county_province = {
							geographical_region = RICE_greenland_struggle_region		
						}
					}
				}
				custom_description = {
					text = RICE_greenland_struggle_good_ending_req
					OR = {
						has_global_variable = RICE_greenland_ending_integration
						has_global_variable = RICE_greenland_ending_indigenous
					}
				}
			}
		}
		#is_house_head = yes
		house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
		custom_description = {
			text = RICE_decision_nordsetur_hunt_month_req
			current_month <= 4
		}
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}


    widget = {
    	gui = "decision_view_widget_RICE_north_atlantic_nordsetur_hunt_decision"
		controller = decision_option_list_controller
    	
		decision_has_second_step = yes
		decision_custom_widget_container = "custom_widgets_container_step_two"
		decision_to_second_step_button = "RICE_north_atlantic_nordsetur_hunt_type" 



		# Minor Hunt
		item = {
			value = RICE_north_atlantic_minor_walrus_hunt_option
			is_valid = {
				is_ai = no
			}
			current_description = RICE_north_atlantic_minor_walrus_hunt_option_desc
			localization = RICE_north_atlantic_minor_walrus_hunt_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_ship_bronze.dds"

			ai_chance = {
				value = 10
			}
		}

		# Major Hunt
		item = {
			value = RICE_north_atlantic_major_walrus_hunt_option
			is_valid = {
				is_ai = no
			}
			current_description = RICE_north_atlantic_major_walrus_hunt_option_desc
			localization = RICE_north_atlantic_major_walrus_hunt_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_ship_silver.dds"

			ai_chance = {
				value = 10
			}
		}

		# Great Hunt
		item = {
			value = RICE_north_atlantic_great_walrus_hunt_option
			is_valid = {
				is_ai = no
			}
			current_description = RICE_north_atlantic_great_walrus_hunt_option_desc
			localization = RICE_north_atlantic_great_walrus_hunt_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_ship_gold.dds"

			ai_chance = {
				value = 10
			}
		}

		# AI Hunt
		item = {
			value = RICE_north_atlantic_ai_walrus_hunt_option
			is_shown = {
				is_ai = yes
			}
			current_description = RICE_north_atlantic_ai_walrus_hunt_option_desc
			localization = RICE_north_atlantic_ai_walrus_hunt_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_ship_gold.dds"

			ai_chance = {
				value = 10
			}
		}

	}



	effect = {

		custom_tooltip = RICE_north_atlantic_hunting_trip_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_hunting_trip_effect_tooltip_2
		custom_tooltip = RICE_north_atlantic_hunting_trip_effect_tooltip_3
		if = {
			limit = {				
				any_character_struggle = {
					is_struggle_type = RICE_greenland_struggle
					is_struggle_phase = struggle_RICE_greenland_phase_subsistence
				}
			}
			custom_tooltip = RICE_north_atlantic_hunting_trip_effect_tooltip_4
		}
		else_if = {
			limit = {				
				any_character_struggle = {
					is_struggle_type = RICE_greenland_struggle
					is_struggle_phase = struggle_RICE_greenland_phase_marginalization
				}
			}
			custom_tooltip = RICE_north_atlantic_hunting_trip_effect_tooltip_5
		}

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_hunting_trip_context_tooltip
		}

		if = { # Minor hunt
			limit = { scope:RICE_north_atlantic_minor_walrus_hunt_option = yes }
			remove_short_term_gold = 50 # CHANGE TO DYNAMIC AMOUNT
			set_variable = {
				name = RICE_nordsetur_hunt
				value = flag:minor
			}
		}

		else_if = { # Major hunt
			limit = { scope:RICE_north_atlantic_major_walrus_hunt_option = yes }
			remove_short_term_gold = 100 # CHANGE TO DYNAMIC AMOUNT
			set_variable = {
				name = RICE_nordsetur_hunt
				value = flag:major
			}
		}

		else_if = { # Great hunt
			limit = { scope:RICE_north_atlantic_great_walrus_hunt_option = yes }
			remove_short_term_gold = 150 # CHANGE TO DYNAMIC AMOUNT
			set_variable = {
				name = RICE_nordsetur_hunt
				value = flag:great
			}
		}

		else_if = { # Minor hunt
			limit = { scope:RICE_north_atlantic_ai_walrus_hunt_option = yes }
			random_list = {
				20 = {
					remove_short_term_gold = 50 # CHANGE TO DYNAMIC AMOUNT
					set_variable = {
						name = RICE_nordsetur_hunt
						value = flag:minor
					}
				}
				20 = {
					trigger = {
						gold >= 75
					}
					remove_short_term_gold = 100 # CHANGE TO DYNAMIC AMOUNT
					set_variable = {
						name = RICE_nordsetur_hunt
						value = flag:major
					}
				}
				10 = {
					trigger = {
						gold >= 125
					}
					remove_short_term_gold = 150 # CHANGE TO DYNAMIC AMOUNT
					set_variable = {
						name = RICE_nordsetur_hunt
						value = flag:great
					}
				}
			}
		}

		trigger_event = north_atlantic.0123

	}

	minimum_cost = {
		gold = 50
	}

	ai_potential = {
		short_term_gold > 50
	}

	ai_will_do = {
		base = 50
		modifier = {
			add = -10
			has_trait = content
		}
		modifier = {
			add = 10
			has_trait = ambitious
		}
		modifier = {
			add = -10
			has_trait = craven
		}
		modifier = {
			add = 10
			has_trait = brave
		}
		modifier = {
			add = -10
			has_trait = paranoid
		}
		modifier = {
			add = 10
			has_trait = greedy
		}
		# Need more money
		modifier = {
			add = 10
			gold < 100
		}
		# Need more money
		modifier = {
			add = 10
			gold < 75
		}
	}
}


# Send aid to Greenland
RICE_north_atlantic_support_greenland = {
	picture = "gfx/interface/illustrations/decisions/decision_longship.dds"

	ai_check_interval = 24

	cooldown = { days = RICE_greenland_support_cooldown_time }
	
	desc = RICE_north_atlantic_support_greenland_desc
	
	is_shown = {
		#exists = house
		#house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
		OR = {
			exists = struggle:RICE_greenland_struggle
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}			
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
	}
	
	is_valid = {
		OR = {
			#custom_tooltip = {
			#	text = struggle_ending_decision_correct_involvement_tt
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			#}						
			AND = {
				custom_description = {
					text = RICE_greenland_struggle_region_req
					any_held_title = {
						tier = tier_county
						any_county_province = {
							geographical_region = RICE_greenland_struggle_region		
						}
					}
				}
				custom_description = {
					text = RICE_greenland_struggle_good_ending_req
					OR = {
						has_global_variable = RICE_greenland_ending_integration
						has_global_variable = RICE_greenland_ending_indigenous
					}
				}
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

    widget = {
    	gui = "decision_view_widget_RICE_north_atlantic_support_greenland_decision"
		controller = decision_option_list_controller
    	
		decision_has_second_step = yes
		decision_custom_widget_container = "custom_widgets_container_step_two"
		decision_to_second_step_button = "RICE_north_atlantic_greenland_aid_type" 



		# Send a few supplies
		item = {
			value = RICE_north_atlantic_basic_supplies_option
			is_valid = {
				gold >= 50
				is_ai = no # AI is apparently too dumb to properly pick something
			}
			current_description = RICE_north_atlantic_basic_supplies_option_desc
			localization = RICE_north_atlantic_basic_supplies_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_basic_supplies.dds"

			ai_chance = {
				value = 35 # Make it a little less likely so AI is more likely to choose the 100 cost options
			}
		}

		# Recruit Settlers
		item = {
			value = RICE_north_atlantic_settlers_option
			is_valid = {
				gold >= 100
				is_ai = no # AI is apparently too dumb to properly pick something
			}
			current_description = RICE_north_atlantic_settlers_option_desc
			localization = RICE_north_atlantic_settlers_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_settlers.dds"

			ai_chance = {
				value = 50
			}
		}

		# Send food
		item = {
			value = RICE_north_atlantic_food_option
			is_valid = {
				gold >= 100
				is_ai = no # AI is apparently too dumb to properly pick something
			}
			current_description = RICE_north_atlantic_food_option_desc
			localization = RICE_north_atlantic_food_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_food.dds"

			ai_chance = {
				value = 50
			}
		}

		# Send materials
		item = {
			value = RICE_north_atlantic_materials_option
			is_valid = {
				gold >= 100
				is_ai = no # AI is apparently too dumb to properly pick something
			}
			current_description = RICE_north_atlantic_materials_option_desc
			localization = RICE_north_atlantic_materials_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_materials.dds"

			ai_chance = {
				value = 50
			}
		}

		# Send clergy
		item = {
			value = RICE_north_atlantic_clergy_option
			is_valid = {
				gold >= 100
				is_ai = no # AI is apparently too dumb to properly pick something
			}
			current_description = RICE_north_atlantic_clergy_option_desc
			localization = RICE_north_atlantic_clergy_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_clergy.dds"

			ai_chance = {
				value = 50
			}
		}

		# Construct Hunting Stations
		item = {
			value = RICE_north_atlantic_hunting_stations_option
			is_valid = {
				gold >= 200
				is_ai = no # AI is apparently too dumb to properly pick something
			}
			current_description = RICE_north_atlantic_hunting_stations_option_desc
			localization = RICE_north_atlantic_hunting_stations_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_hunting_stations.dds"

			ai_chance = {
				value = 20
			}
		}

		# Construct Shielings
		item = {
			value = RICE_north_atlantic_shielings_option
			is_valid = {
				gold >= 200
				is_ai = no # AI is apparently too dumb to properly pick something
			}
			current_description = RICE_north_atlantic_shielings_option_desc
			localization = RICE_north_atlantic_shielings_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_shielings.dds"

			ai_chance = {
				value = 20
			}
		}

		# Construct temples
		item = {
			value = RICE_north_atlantic_temples_option
			is_valid = {
				gold >= 200
				is_ai = no # AI is apparently too dumb to properly pick something
			}
			current_description = RICE_north_atlantic_temples_option_desc
			localization = RICE_north_atlantic_temples_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_temples.dds"

			ai_chance = {
				value = 20
			}
		}

		# AI option
		item = {
			value = RICE_north_atlantic_ai_option
			is_shown = {
				is_ai = yes # AI picker
			}
			current_description = RICE_north_atlantic_ai_option_desc
			localization = RICE_north_atlantic_ai_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_temples.dds"

			ai_chance = {
				value = 20
			}
		}

	}

	effect = {
		custom_tooltip = RICE_north_atlantic_support_greenland_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_support_greenland_effect_tooltip_2
		if = {
			limit = {
				exists = house
				NOT = { house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate } }
			}
			custom_tooltip = RICE_north_atlantic_support_greenland_effect_tooltip_3
		}
		custom_tooltip = RICE_north_atlantic_support_greenland_effect_tooltip_4
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_support_greenland_context_tooltip
		}

		if = { # Basic Supplies
			limit = { scope:RICE_north_atlantic_basic_supplies_option = yes }
			set_variable = {
				name = RICE_greenland_aid
				value = flag:basic_supplies
			}
		}

		else_if = { # Settlers
			limit = { scope:RICE_north_atlantic_settlers_option = yes }
			set_variable = {
				name = RICE_greenland_aid
				value = flag:settlers
			}
		}

		else_if = { # Food
			limit = { scope:RICE_north_atlantic_food_option = yes }
			set_variable = {
				name = RICE_greenland_aid
				value = flag:food
			}
		}

		else_if = { # Materials
			limit = { scope:RICE_north_atlantic_materials_option = yes }
			set_variable = {
				name = RICE_greenland_aid
				value = flag:materials
			}
		}

		else_if = { # Clergy
			limit = { scope:RICE_north_atlantic_clergy_option = yes }
			set_variable = {
				name = RICE_greenland_aid
				value = flag:clergy
			}
		}

		else_if = { # Hunting Stations
			limit = { scope:RICE_north_atlantic_hunting_stations_option = yes }
			set_variable = {
				name = RICE_greenland_aid
				value = flag:hunting_stations
			}
		}

		else_if = { # Shielings
			limit = { scope:RICE_north_atlantic_shielings_option = yes }
			set_variable = {
				name = RICE_greenland_aid
				value = flag:shielings
			}
		}

		else_if = { # Temples
			limit = { scope:RICE_north_atlantic_temples_option = yes }
			set_variable = {
				name = RICE_greenland_aid
				value = flag:temples
			}
		}

		else_if = { # AI
			limit = { scope:RICE_north_atlantic_ai_option = yes }
			random_list = {
				10 = {
					set_variable = {
						name = RICE_greenland_aid
						value = flag:basic_supplies
					}
				}
				15 = {
					trigger = {
						gold >= 75
					}
					set_variable = {
						name = RICE_greenland_aid
						value = flag:settlers
					}
				}
				15 = {
					trigger = {
						gold >= 75
					}
					set_variable = {
						name = RICE_greenland_aid
						value = flag:food
					}
				}
				15 = {
					trigger = {
						gold >= 75
					}
					set_variable = {
						name = RICE_greenland_aid
						value = flag:materials
					}
				}
				15 = {
					trigger = {
						gold >= 75
					}
					set_variable = {
						name = RICE_greenland_aid
						value = flag:clergy
					}
				}
				10 = {
					trigger = {
						gold >= 150
					}
					set_variable = {
						name = RICE_greenland_aid
						value = flag:hunting_stations
					}
				}
				10 = {
					trigger = {
						gold >= 150
					}
					set_variable = {
						name = RICE_greenland_aid
						value = flag:shielings
					}
				}
				10 = {
					trigger = {
						gold >= 150
					}
					set_variable = {
						name = RICE_greenland_aid
						value = flag:temples
					}
				}
			}
		}

		trigger_event = {
			id = north_atlantic.0100
		}
	}

	minimum_cost = {
		gold = 50
	}

	ai_potential = {
		short_term_gold > 75
	}

	ai_will_do = {
		base = 100
		modifier = {
			add = -8
			has_trait = content
		}
		modifier = {
			add = 8
			has_trait = ambitious
		}
		modifier = {
			add = -8
			has_trait = lazy
		}
		modifier = {
			add = 8
			has_trait = diligent
		}
		modifier = {
			add = -8
			has_trait = greedy
		}
		modifier = {
			add = 8
			has_trait = generous
		}
	}
}

# Send aid to Vinland
RICE_north_atlantic_support_vinland = {
	picture = "gfx/interface/illustrations/decisions/decision_vinland_encounter.dds"

	ai_check_interval = 24

	cooldown = { days = RICE_greenland_support_cooldown_time }
	
	desc = RICE_north_atlantic_support_vinland_desc
	
	is_shown = {
		#exists = house
		#house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
		has_global_variable = RICE_north_atlantic_vinland_discovered
		OR = {
			exists = struggle:RICE_greenland_struggle
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}			
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
	}
	
	is_valid = {
		OR = {
			#custom_tooltip = {
			#	text = struggle_ending_decision_correct_involvement_tt
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			#}						
			AND = {
				custom_description = {
					text = RICE_greenland_struggle_region_req
					any_held_title = {
						tier = tier_county
						any_county_province = {
							geographical_region = RICE_greenland_struggle_region		
						}
					}
				}
				custom_description = {
					text = RICE_greenland_struggle_good_ending_req
					OR = {
						has_global_variable = RICE_greenland_ending_integration
						has_global_variable = RICE_greenland_ending_indigenous
					}
				}
			}
		}
		global_var:RICE_north_atlantic_vinland_outposts > 0
		dynasty = {
			OR = {
				has_dynasty_modifier = RICE_north_atlantic_vinland_outpost
				has_dynasty_modifier = RICE_north_atlantic_vinland_settlement
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

    widget = {
    	gui = "decision_view_widget_RICE_north_atlantic_support_vinland_decision"
		controller = decision_option_list_controller
    	
		decision_has_second_step = yes
		decision_custom_widget_container = "custom_widgets_container_step_two"
		decision_to_second_step_button = "RICE_north_atlantic_vinland_aid_type" 



		# Send supplies
		item = {
			value = RICE_north_atlantic_vinland_supplies_option
			current_description = RICE_north_atlantic_vinland_supplies_option_desc
			localization = RICE_north_atlantic_vinland_supplies_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_basic_supplies.dds"

			ai_chance = {
				value = 10
			}
		}

		# Recruit Settlers
		item = {
			value = RICE_north_atlantic_vinland_settlers_option
			current_description = RICE_north_atlantic_vinland_settlers_option_desc
			localization = RICE_north_atlantic_vinland_settlers_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_settlers.dds"

			ai_chance = {
				value = 10
			}
		}

		# Build base camps
		item = {
			value = RICE_north_atlantic_vinland_base_camps_option
			current_description = RICE_north_atlantic_vinland_base_camps_option_desc
			localization = RICE_north_atlantic_vinland_base_camps_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_forest.dds"

			ai_chance = {
				value = 10
			}
		}

		# Build temples
		item = {
			value = RICE_north_atlantic_vinland_temples_option
			current_description = RICE_north_atlantic_vinland_temples_option_desc
			localization = RICE_north_atlantic_vinland_temples_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_temples.dds"

			ai_chance = {
				value = 10
			}
		}

	}

	effect = {
		custom_tooltip = RICE_north_atlantic_support_vinland_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_support_vinland_effect_tooltip_2
		if = {
			limit = {
				exists = house
				NOT = { house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate } }
			}
			custom_tooltip = RICE_north_atlantic_support_vinland_effect_tooltip_3
		}
		custom_tooltip = RICE_north_atlantic_support_vinland_effect_tooltip_4
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_support_vinland_context_tooltip
		}

		if = { # Basic Supplies
			limit = { scope:RICE_north_atlantic_vinland_supplies_option = yes }
			set_variable = {
				name = RICE_vinland_aid
				value = flag:supplies
			}
		}

		else_if = { # Settlers
			limit = { scope:RICE_north_atlantic_vinland_settlers_option = yes }
			set_variable = {
				name = RICE_vinland_aid
				value = flag:settlers
			}
		}

		else_if = { # Base Camps
			limit = { scope:RICE_north_atlantic_vinland_base_camps_option = yes }
			set_variable = {
				name = RICE_vinland_aid
				value = flag:base_camps
			}
		}

		else_if = { # Temples
			limit = { scope:RICE_north_atlantic_vinland_temples_option = yes }
			set_variable = {
				name = RICE_vinland_aid
				value = flag:temples
			}
		}

		trigger_event = {
			id = north_atlantic.0110
		}
	}

	minimum_cost = {
		gold = 50
	}

	ai_potential = {
		short_term_gold > 50
	}

	ai_will_do = {
		base = 100
		modifier = {
			add = -8
			has_trait = content
		}
		modifier = {
			add = 8
			has_trait = ambitious
		}
		modifier = {
			add = -8
			has_trait = lazy
		}
		modifier = {
			add = 8
			has_trait = diligent
		}
		modifier = {
			add = -8
			has_trait = greedy
		}
		modifier = {
			add = 8
			has_trait = generous
		}
	}
}


# Send minor expeditions to the western territories
RICE_north_atlantic_explore_americas = {
	picture = "gfx/interface/illustrations/decisions/decision_vinland.dds"

	ai_check_interval = 60

	cooldown = { days = 3650 }
	
	desc = RICE_north_atlantic_explore_americas_desc
	
	is_shown = {
		exists = house
		house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
		has_global_variable = RICE_north_atlantic_vinland_discovered
		OR = {
			exists = struggle:RICE_greenland_struggle
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}			
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
	}
	
	is_valid = {
		OR = {
			#custom_tooltip = {
			#	text = struggle_ending_decision_correct_involvement_tt
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			#}					
			AND = {
				custom_description = {
					text = RICE_greenland_struggle_region_req
					any_held_title = {
						tier = tier_county
						any_county_province = {
							geographical_region = RICE_greenland_struggle_region		
						}
					}
				}
				custom_description = {
					text = RICE_greenland_struggle_good_ending_req
					OR = {
						has_global_variable = RICE_greenland_ending_integration
						has_global_variable = RICE_greenland_ending_indigenous
					}
				}
			}
		}
		NOT = { has_character_flag = RICE_north_atlantic_ongoing_expedition }
	}
	
	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

    widget = {
    	gui = "decision_view_widget_RICE_north_atlantic_explore_americas_decision"
		controller = decision_option_list_controller
    	
		decision_has_second_step = yes
		decision_custom_widget_container = "custom_widgets_container_step_two"
		decision_to_second_step_button = "RICE_north_atlantic_pick_expedition_destination_type" 


		# # Nordsetur
		# item = {
		# 	value = RICE_north_atlantic_nordsetur_option
		# 	is_valid = {
		# 		exists = dynasty
		# 	}
		# 	current_description = RICE_north_atlantic_nordsetur_option_desc
		# 	localization = RICE_north_atlantic_nordsetur_option
		# 	icon = "gfx/interface/icons/widgets/RICE_north_atlantic_nordsetur.dds"

		# 	ai_chance = {
		# 		value = 12
		# 	}
		# }

		# Helluland
		item = {
			value = RICE_north_atlantic_helluland_option
			is_valid = {
				exists = dynasty
			}
			current_description = RICE_north_atlantic_helluland_option_desc
			localization = RICE_north_atlantic_helluland_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_helluland.dds"

			ai_chance = {
				value = 12
			}
		}

		# Markland
		item = {
			value = RICE_north_atlantic_markland_option
			is_valid = {
				exists = dynasty
			}
			current_description = RICE_north_atlantic_markland_option_desc
			localization = RICE_north_atlantic_markland_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_markland.dds"

			ai_chance = {
				value = 7
			}
		}

		# Vinland
		item = {
			value = RICE_north_atlantic_vinland_option
			is_valid = {
				exists = dynasty
			}
			current_description = RICE_north_atlantic_vinland_option_desc
			localization = RICE_north_atlantic_vinland_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_vinland.dds"

			ai_chance = {
				value = 1
			}
		}

	}

	effect = {
		custom_tooltip = RICE_north_atlantic_explore_americas_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_explore_americas_effect_tooltip_2
		custom_tooltip = RICE_north_atlantic_explore_americas_effect_tooltip_3
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_explore_americas_context_tooltip
		}

		if = { # Helluland
			limit = { scope:RICE_north_atlantic_helluland_option = yes }
			set_variable = {
				name = RICE_expedition_destination_pick
				value = flag:helluland
			}
		}

		else_if = { # Markland
			limit = { scope:RICE_north_atlantic_markland_option = yes }
			set_variable = {
				name = RICE_expedition_destination_pick
				value = flag:markland
			}
		}

		else_if = { # Vinland
			limit = { scope:RICE_north_atlantic_vinland_option = yes }
			set_variable = {
				name = RICE_expedition_destination_pick
				value = flag:vinland
			}
		}

		trigger_event = {
			id = north_atlantic.0030 # Have some default courtier options, or allow time to wait for a pick
		}
	}

	minimum_cost = { 
		gold = 100
	}	

	ai_potential = {
		short_term_gold > 100
	}

	ai_will_do = {
		base = 20
		modifier = {
			add = -8
			has_trait = content
		}
		modifier = {
			add = 8
			has_trait = ambitious
		}
		modifier = {
			add = -8
			has_trait = craven
		}
		modifier = {
			add = 8
			has_trait = brave
		}
	}
}





# Attract Immigrants from Greenland
RICE_north_atlantic_attract_greenland_immigrants = {
	picture = "gfx/interface/illustrations/decisions/decision_longship.dds"

	ai_check_interval = 24

	cooldown = { days = 3650 }
	
	desc = RICE_north_atlantic_attract_greenland_immigrants_desc
	
	is_shown = {
		#exists = house
		#house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
		exists = struggle:RICE_greenland_struggle
		highest_held_title_tier > tier_barony
		is_landed = yes
		any_character_struggle = {
			involvement = involved
			is_struggle_type = RICE_greenland_struggle
		}	
		any_character_struggle = {
			is_struggle_type = RICE_greenland_struggle
			OR = {
				is_struggle_phase = struggle_RICE_greenland_phase_subsistence
				is_struggle_phase = struggle_RICE_greenland_phase_marginalization
			}
		}
	}
	
	is_valid = {
		#custom_tooltip = {
		#	text = struggle_ending_decision_correct_involvement_tt
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}
		#}	
		custom_tooltip = {
			text = RICE_greenland_struggle_subsistence_or_marginalization_phase
			any_character_struggle = {
				is_struggle_type = RICE_greenland_struggle
				OR = {
					is_struggle_phase = struggle_RICE_greenland_phase_subsistence
					is_struggle_phase = struggle_RICE_greenland_phase_marginalization
				}
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {

		culture:greenlandic = {
			save_scope_as = greenlandic
		}

		show_as_tooltip = {
			add_prestige = 100
			#RICE_north_atlantic_attract_greenland_immigrants_effect = yes
		}

		custom_tooltip = RICE_north_atlantic_attract_greenland_immigrants_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_attract_greenland_immigrants_effect_tooltip_2

		if = {
			limit = {
				exists = struggle:RICE_greenland_struggle
				struggle:RICE_greenland_struggle = { is_struggle_phase = struggle_RICE_greenland_phase_subsistence }
			}
			custom_tooltip = RICE_north_atlantic_attract_greenland_immigrants_effect_tooltip_3
		}
		else_if = {
			limit = {
				exists = struggle:RICE_greenland_struggle
				struggle:RICE_greenland_struggle = { is_struggle_phase = struggle_RICE_greenland_phase_marginalization }
			}
			custom_tooltip = RICE_north_atlantic_attract_greenland_immigrants_effect_tooltip_4
		}

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_attract_greenland_immigrants_context_tooltip
		}

		trigger_event = north_atlantic.0021
	}

	cost = { 
		gold = { value = medium_gold_value } # Could be more
	}	

	ai_potential = {
		short_term_gold > medium_gold_value
	}

	ai_will_do = {
		base = 20
		modifier = {
			add = -8
			has_trait = content
		}
		modifier = {
			add = 8
			has_trait = ambitious
		}
	}
}


#############################################
#											#
# OTHER DECISIONS						    #
#											#
#############################################




# Recruit Native American warriors
RICE_north_atlantic_recruit_native_american_warriors = {
	picture = "gfx/interface/illustrations/decisions/decision_native_american_council.dds"

	ai_check_interval = 36

	cooldown = { days = 1825 }
	
	desc = RICE_north_atlantic_recruit_native_american_warriors_desc
	
	is_shown = {
		is_landed = yes
		#custom_description = {
			#	text = RICE_native_american_culture_req
			OR = {
				culture = { has_cultural_pillar = heritage_algonquian }				
				culture = { has_cultural_pillar = heritage_iroquoian }		
				culture = { has_cultural_pillar = heritage_paleo_inuit }		
				culture = { has_cultural_pillar = heritage_inuit }		
			}
		#}
	}
	
	is_valid = {
		#custom_description = {
		#	text = RICE_native_american_culture_req
			OR = {
				culture = { has_cultural_pillar = heritage_algonquian }				
				culture = { has_cultural_pillar = heritage_iroquoian }		
				culture = { has_cultural_pillar = heritage_paleo_inuit }		
				culture = { has_cultural_pillar = heritage_inuit }		
			}
		#}			

	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		
		RICE_native_american_warrior_spawn_effect = yes	
		
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_recruit_native_american_warriors_context_tooltip
		}
		
	}

	cost = { 
		gold = { value = medium_gold_value } # Will depend 
		piety = { value = medium_piety_value } # Will depend 
		prestige = { value = medium_prestige_value } # Will depend 
	}	

	ai_potential = {
		short_term_gold >= medium_gold_value
		piety >= medium_piety_value
		prestige >= medium_prestige_value
	}

	ai_will_do = {
		base = 20
	}
}



# Whale Hunt
RICE_north_atlantic_whale_hunt = {
	picture = "gfx/interface/illustrations/decisions/decision_longship.dds"

	ai_check_interval = 24

	cooldown = { days = 3650 }
	
	desc = RICE_north_atlantic_whale_hunt_desc
	
	is_shown = {
		highest_held_title_tier > tier_barony
		is_landed = yes
		culture = {
			OR = {
				has_cultural_tradition = tradition_RICE_whalers
				has_cultural_tradition = tradition_RICE_master_whalers
			}
		}
		# any_held_title = {
		# 	tier = tier_county
		# 	is_coastal_county = yes
		# }
	}
	
	is_valid = {
		culture = {
			OR = {
				has_cultural_tradition = tradition_RICE_whalers
				has_cultural_tradition = tradition_RICE_master_whalers
			}
		}
		any_held_title = {
			tier = tier_county
			is_coastal_county = yes
		}	
	}
	
	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		custom_tooltip = RICE_north_atlantic_whale_hunt_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_whale_hunt_effect_tooltip_2
		if = {
			limit = {
				culture = {
					has_cultural_tradition = tradition_RICE_master_whalers
				}
			}
			custom_tooltip = RICE_north_atlantic_whale_hunt_effect_tooltip_3
		}
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_whale_hunt_context_tooltip
		}

		trigger_event = {
			id = north_atlantic.8888 # Have some default courtier options, or allow time to wait for a pick
		}
	}

	cost = { 
		gold = { value = RICE_guanche_activity_cost } # Could be more
	}	

	ai_potential = {
		short_term_gold > RICE_guanche_activity_cost
	}

	ai_will_do = {
		base = 20
		modifier = {
			add = -8
			has_trait = content
		}
		modifier = {
			add = 8
			has_trait = ambitious
		}
		modifier = {
			add = -8
			has_trait = craven
		}
		modifier = {
			add = 8
			has_trait = brave
		}
	}
}

# Exempt Whaling Towns from paying tax
RICE_north_atlantic_whale_exempt_tax = {
	picture = "gfx/interface/illustrations/decisions/decision_european_port.dds"

	ai_check_interval = 24

	cooldown = { days = 3650 }
	
	desc = RICE_north_atlantic_whale_exempt_tax_desc
	
	is_shown = {
		highest_held_title_tier > tier_barony
		is_landed = yes
		culture = {
			has_cultural_tradition = tradition_RICE_master_whalers
		}
		# any_held_title = {
		# 	tier = tier_county
		# 	is_coastal_county = yes
		# }
	}
	
	is_valid = {
		culture = {
			has_cultural_tradition = tradition_RICE_master_whalers
		}
		any_held_title = {
			tier = tier_county
			is_coastal_county = yes
		}	
		NOR = {
			has_character_modifier = RICE_north_atlantic_whale_tax_exempter
			has_character_modifier = RICE_north_atlantic_whale_tax_levier
		}
		OR = {
			prestige_level >= 2
			custom_description = {
				text = "is_king_or_emperor"
				highest_held_title_tier >= tier_kingdom
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		custom_tooltip = RICE_north_atlantic_whale_exempt_tax_effect_tooltip_1

		show_as_tooltip = {
			add_character_modifier = {
				modifier = RICE_north_atlantic_whale_tax_exempter
				years = 10
			}
		}

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_whale_exempt_tax_context_tooltip
		}

		trigger_event = {
			id = north_atlantic.8888 # Have some default courtier options, or allow time to wait for a pick
		}
	}

	cost = { 
		prestige = { value = major_prestige_value }
	}	

	ai_potential = {
		prestige > major_prestige_value
	}

	ai_will_do = {
		base = 20
		modifier = {
			add = -8
			has_trait = arbitrary
		}
		modifier = {
			add = 8
			has_trait = just
		}
		modifier = {
			add = -8
			has_trait = greedy
		}
		modifier = {
			add = 8
			has_trait = generous
		}
	}
}

# Levy extra taxes on whaling towns
RICE_north_atlantic_whale_levy_extra_tax = {
	picture = "gfx/interface/illustrations/decisions/decision_european_port.dds"

	ai_check_interval = 24

	cooldown = { days = 3650 }
	
	desc = RICE_north_atlantic_whale_levy_extra_tax_desc
	
	is_shown = {
		highest_held_title_tier > tier_barony
		is_landed = yes
		culture = {
			has_cultural_tradition = tradition_RICE_master_whalers
		}
		any_held_title = {
			tier = tier_county
			is_coastal_county = yes
		}
	}
	
	is_valid = {
		culture = {
			has_cultural_tradition = tradition_RICE_master_whalers
		}
		any_held_title = {
			tier = tier_county
			is_coastal_county = yes
		}	
		NOR = {
			has_character_modifier = RICE_north_atlantic_whale_tax_exempter
			has_character_modifier = RICE_north_atlantic_whale_tax_levier
		}
		OR = {
			prestige_level >= 2
			custom_description = {
				text = "is_king_or_emperor"
				highest_held_title_tier >= tier_kingdom
			}
		}
	}
	
	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {
		custom_tooltip = RICE_north_atlantic_whale_levy_extra_tax_effect_tooltip_1

		show_as_tooltip = {
			add_character_modifier = {
				modifier = RICE_north_atlantic_whale_tax_levier
				years = 10
			}
		}

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_whale_levy_extra_tax_context_tooltip
		}

		trigger_event = {
			id = north_atlantic.8888 # Have some default courtier options, or allow time to wait for a pick
		}
	}

	cost = { 
		prestige = { value = major_prestige_value }
	}	

	ai_potential = {
		prestige > major_prestige_value
	}

	ai_will_do = {
		base = 20
		modifier = {
			add = -8
			has_trait = arbitrary
		}
		modifier = {
			add = 8
			has_trait = just
		}
		modifier = {
			add = -8
			has_trait = greedy
		}
		modifier = {
			add = 8
			has_trait = generous
		}
	}
}



