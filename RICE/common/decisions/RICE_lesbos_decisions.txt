


RICE_mediterranean_collaborate_with_pirates = {
	picture = "gfx/interface/illustrations/decisions/decision_RICE_mediterranean_cove.dds"
	major = yes
	ai_check_interval = 120

	desc = RICE_mediterranean_collaborate_with_pirates_desc
	selection_tooltip = RICE_mediterranean_collaborate_with_pirates_tooltip

	is_shown = {
		is_landed = yes
		highest_held_title_tier > tier_barony
		exists = capital_province
		# Must have a capital coastal county that does not have a pirate den
		capital_county = {
			any_county_province = {
				geographical_region = RICE_mediterranean_region
				is_coastal = yes
				has_holding = yes
			}
		}
		NOT = {
			any_held_county = {
				RICE_lesbos_has_pirate_den_trigger = yes
			}			
		}
	}
	

	is_valid = {
		#prestige_level >= 2
		custom_description = {
			text = RICE_mediterranean_collaborate_with_pirates_requirement_1
			capital_county = {
				any_county_province = {
					geographical_region = RICE_mediterranean_region
					is_coastal = yes
					has_holding = yes
				}
			}
		}
		custom_description = {
			text = RICE_mediterranean_collaborate_with_pirates_requirement_3
			NOT = {
				any_held_county = { 
					RICE_lesbos_has_pirate_den_trigger = yes
				}		
			}
		}
		# custom_description = {
		# 	text = RICE_mediterranean_collaborate_with_pirates_requirement_2
		# 	dynasty = {
		# 		has_dynasty_perk = RICE_socotra_indian_ocean_legacy_3
		# 	}
		# }
	}

	is_valid_showing_failures_only = {
		is_ruler = yes
		is_available_adult = yes
	}

	effect = {
		#add_prestige = medium_prestige_gain
		dynasty = { add_dynasty_prestige = miniscule_dynasty_prestige_gain }
		add_legitimacy = miniscule_legitimacy_loss
		#dynasty = { add_dynasty_prestige = 100 }
		custom_tooltip = RICE_mediterranean_collaborate_with_pirates_effect_tooltip_1
		custom_tooltip = RICE_mediterranean_collaborate_with_pirates_effect_tooltip_2
		show_as_tooltip = {
			capital_county = {
				add_county_modifier = {
					modifier = RICE_socotra_pirate_infestation
					years = 10
				}
			}
		}
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_mediterranean_collaborate_with_pirates_context_tooltip
		}
		trigger_event = lesbos.0050
	}

	cost = {
		gold = massive_gold_value
		#prestige = medium_prestige_gain
	}
	
	ai_potential = {
		short_term_gold > massive_gold_value
	}

	ai_will_do = {
		base = 5
		modifier = {
			add = 20
			has_trait = greedy
		}
	}
}

RICE_pirate_mediterranean_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_RICE_mediterranean_cove.dds"
	desc = RICE_pirate_mediterranean_decision_desc

	ai_check_interval = 28
	
	cooldown = { years = 5 }

	is_shown = {
		NOT = { has_global_variable = RICE_game_started_on_TFE_start_date }
		is_landed = yes
		any_held_county = {
			any_county_province = {
				geographical_region = RICE_mediterranean_region
			}
		}
	}

	is_valid = {
		capital_county = {
			is_coastal_county = yes
			any_county_province = {
				geographical_region = RICE_mediterranean_region
			}
		}
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	
	widget = {
		gui = "decision_view_widget_RICE_pirate_mediterranean_decision"
		controller = decision_option_list_controller
		decision_to_second_step_button = "RICE_PIRATE_PICK_ACTION_TYPE"
		show_from_start = yes
		
		### Establish Relations with Pirates
		item = {
			value = RICE_pirate_establish_relations
			is_valid = {
				NOT = {
					has_character_modifier = RICE_pirate_mediterranean_connections_modifier
				}
			}
			current_description = RICE_pirate_establish_relations_desc
			localization = RICE_pirate_establish_relations_name
			icon = "gfx/interface/icons/widgets/RICE_pirate_establish_relations.dds"
			ai_chance = {
				value = 10
			}
		}
		
		### Acquire Booty
		item = {
			value = RICE_pirate_acquire_booty
			is_valid = {
				custom_description = {
					text = RICE_pirate_mediterranean_decision_requirement_1
					OR = {					
						has_character_modifier = RICE_pirate_mediterranean_connections_modifier
						any_held_county = { 
							RICE_lesbos_has_pirate_den_trigger = yes
						}
					}
				}
			}
			current_description = RICE_pirate_acquire_booty_desc
			localization = RICE_pirate_acquire_booty_name
			icon = "gfx/interface/icons/widgets/RICE_pirate_acquire_booty.dds"
			ai_chance = {
				value = 10
			}
		}
		
		### Authorize Sales
		item = {
			value = RICE_pirate_authorize_sales
			is_valid = {
				custom_description = {
					text = RICE_pirate_mediterranean_decision_requirement_1
					OR = {					
						has_character_modifier = RICE_pirate_mediterranean_connections_modifier
						any_held_county = { 
							RICE_lesbos_has_pirate_den_trigger = yes
						}
					}
				}
			}
			current_description = RICE_pirate_authorize_sales_desc
			localization = RICE_pirate_authorize_sales_name
			icon = "gfx/interface/icons/widgets/RICE_pirate_authorize_sales.dds"
			ai_chance = {
				value = 10
			}
		}
		
		### Recruit Pirates
		item = {
			value = RICE_pirate_recruit_pirates
			is_valid = {
				custom_description = {
					text = RICE_pirate_mediterranean_decision_requirement_1
					OR = {					
						has_character_modifier = RICE_pirate_mediterranean_connections_modifier
						any_held_county = { 
							RICE_lesbos_has_pirate_den_trigger = yes
						}
					}
				}
			}
			current_description = RICE_pirate_recruit_pirates_desc
			localization = RICE_pirate_recruit_pirates_name
			icon = "gfx/interface/icons/widgets/RICE_pirate_recruit_pirates.dds"
			ai_chance = {
				value = 10
			}
		}
		
		### Random Prisoners
		item = {
			value = RICE_pirate_ransom_prisoners
			is_valid = {
				custom_description = {
					text = RICE_pirate_mediterranean_decision_requirement_1
					OR = {					
						has_character_modifier = RICE_pirate_mediterranean_connections_modifier
						any_held_county = { 
							RICE_lesbos_has_pirate_den_trigger = yes
						}
					}
				}
			}
			current_description = RICE_pirate_ransom_prisoners_desc
			localization = RICE_pirate_ransom_prisoners_name
			icon = "gfx/interface/icons/widgets/RICE_pirate_ransom_prisoners.dds"
			ai_chance = {
				value = 10
			}
		}
		
		### Compensate Victims
		item = {
			value = RICE_pirate_compensate_victims
			is_valid = {
				custom_description = {
					text = RICE_pirate_mediterranean_decision_requirement_1
					OR = {					
						has_character_modifier = RICE_pirate_mediterranean_connections_modifier
						any_held_county = { 
							RICE_lesbos_has_pirate_den_trigger = yes
						}
					}
				}
			}
			current_description = RICE_pirate_compensate_victims_desc
			localization = RICE_pirate_compensate_victims_name
			icon = "gfx/interface/icons/widgets/RICE_pirate_compensate_victims.dds"
			ai_chance = {
				value = 10
			}
		}
		

	}

	cost = {
		prestige = { value = medium_prestige_value }
	}
	
	ai_potential = {
		short_term_gold > medium_prestige_value
	}

	effect = {

		RICE_pirate_decision_basic_effect = yes
		
		if = {
			limit = {
				is_ai = yes
			}

			random_list = {
				10 = {

				}
				10 = {

				}
			}
		}

		else_if = {
			limit = { scope:RICE_pirate_establish_relations = yes }
			show_as_tooltip = {
				custom_tooltip = RICE_pirate_establish_relations_effect_tooltip_1
			}
			trigger_event = lesbos.8888
		}

		else_if = {
			limit = { scope:RICE_pirate_acquire_booty = yes }
			show_as_tooltip = {
				custom_tooltip = RICE_pirate_acquire_booty_effect_tooltip_1
			}
			trigger_event = lesbos.8888
		}

		else_if = {
			limit = { scope:RICE_pirate_authorize_sales = yes }
			show_as_tooltip = {
				custom_tooltip = RICE_pirate_authorize_sales_effect_tooltip_1
			}
			trigger_event = lesbos.8888
		}

		else_if = {
			limit = { scope:RICE_pirate_recruit_pirates = yes }
			show_as_tooltip = {
				custom_tooltip = RICE_pirate_recruit_pirates_effect_tooltip_1
			}
			trigger_event = lesbos.8888
		}

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_pirate_mediterranean_decision_context_tooltip
		}

	}

	ai_will_do = {
		base = 30
		modifier = {
			add = -10
			has_trait = generous
		}
		modifier = {
			add = 10
			has_trait = greedy
		}
		modifier = {
			add = -10
			has_trait = compassionate
		}
		modifier = {
			add = 10
			has_trait = sadistic
		}
		modifier = {
			add = -10
			has_trait = content
		}
		modifier = {
			add = 10
			has_trait = ambitious
		}
	}
}









